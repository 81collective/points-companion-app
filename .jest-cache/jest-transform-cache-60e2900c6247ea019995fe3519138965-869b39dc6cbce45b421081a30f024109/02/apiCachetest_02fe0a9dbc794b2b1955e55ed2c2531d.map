{"version":3,"names":["_apiCache","require","localStorageMock","getItem","jest","fn","setItem","removeItem","clear","Object","defineProperty","window","value","describe","beforeEach","clearAllMocks","apiCache","it","testData","message","cacheKey","set","retrieved","get","expect","toEqual","toBeNull","testCache","constructor","maxSize","defaultTTL","enablePersistence","lruEnabled","ttl","console","log","persistent","persistCache","toHaveBeenCalled","callArgs","mock","calls","find","call","toBeTruthy","mockCacheData","data","timestamp","Date","now","accessCount","lastAccessed","size","tags","mockReturnValue","JSON","stringify","newCache","persistenceKey","toHaveBeenCalledWith","stats","hits","misses","getStats","toBe","getHitRate","toBeGreaterThan","itemCount","callCount","mockFetcher","Promise","resolve","promises","dedupe","results","all","forEach","result","reject","Error","rejects","toThrow","clearByTags","largeData","Array","from","length","_","i","id","repeat","startTime","performance","endTime","duration","toBeLessThan","concurrentOperations","push"],"sources":["apiCache.test.ts"],"sourcesContent":["import { apiCache } from '../../lib/apiCache';\r\n\r\n// Mock localStorage\r\nconst localStorageMock = {\r\n  getItem: jest.fn(),\r\n  setItem: jest.fn(),\r\n  removeItem: jest.fn(),\r\n  clear: jest.fn(),\r\n};\r\n\r\nObject.defineProperty(window, 'localStorage', {\r\n  value: localStorageMock,\r\n});\r\n\r\ndescribe('apiCache', () => {\r\n  beforeEach(() => {\r\n    jest.clearAllMocks();\r\n    // Reset cache state\r\n    apiCache.clear();\r\n  });\r\n\r\n  describe('Basic Cache Operations', () => {\r\n    it('should store and retrieve data correctly', async () => {\r\n      const testData = { message: 'Hello World' };\r\n      const cacheKey = 'test-key';\r\n\r\n      await apiCache.set(cacheKey, testData);\r\n      const retrieved = await apiCache.get(cacheKey);\r\n\r\n      expect(retrieved).toEqual(testData);\r\n    });\r\n\r\n    it('should return null for non-existent keys', async () => {\r\n      const retrieved = await apiCache.get('non-existent-key');\r\n      expect(retrieved).toBeNull();\r\n    });\r\n\r\n    it('should handle cache expiration', async () => {\r\n      const testCache = new (apiCache.constructor as any)({\r\n        maxSize: 50 * 1024 * 1024,\r\n        defaultTTL: 5 * 60 * 1000,\r\n        enablePersistence: false,\r\n        lruEnabled: true\r\n      });\r\n\r\n      const testData = { message: 'Expires quickly' };\r\n      const cacheKey = 'expiring-key';\r\n\r\n      // Set with very short TTL (0ms)\r\n      await testCache.set(cacheKey, testData, { ttl: 0 });\r\n\r\n      const retrieved = await testCache.get(cacheKey);\r\n      expect(retrieved).toBeNull();\r\n    });\r\n\r\n    it('should clear all cache entries', async () => {\r\n      await apiCache.set('key1', 'value1');\r\n      await apiCache.set('key2', 'value2');\r\n\r\n      apiCache.clear();\r\n\r\n      expect(await apiCache.get('key1')).toBeNull();\r\n      expect(await apiCache.get('key2')).toBeNull();\r\n    });\r\n  });\r\n\r\n  describe('LRU Eviction', () => {\r\n    it('should evict least recently used items when capacity is exceeded', async () => {\r\n      // Create a cache with very small capacity for testing\r\n      const testCache = new (apiCache.constructor as any)({\r\n        maxSize: 25, // Even smaller capacity\r\n        defaultTTL: 5 * 60 * 1000,\r\n        enablePersistence: false,\r\n        lruEnabled: true\r\n      });\r\n\r\n      // Set small data that will fit\r\n      await testCache.set('key1', 'val1'); // ~6 bytes\r\n      await testCache.set('key2', 'val2'); // ~6 bytes\r\n      await testCache.set('key3', 'val3'); // ~6 bytes\r\n\r\n      // Debug: check what keys exist\r\n      console.log('key1:', await testCache.get('key1'));\r\n      console.log('key2:', await testCache.get('key2'));\r\n      console.log('key3:', await testCache.get('key3'));\r\n      console.log('key4:', await testCache.get('key4'));\r\n\r\n      expect(await testCache.get('key1')).toBeNull(); // Should be evicted\r\n      expect(await testCache.get('key2')).toEqual('val2');\r\n      expect(await testCache.get('key3')).toEqual('val3');\r\n      expect(await testCache.get('key4')).toEqual('value4');\r\n    });\r\n\r\n    it('should update LRU order on access', async () => {\r\n      const testCache = new (apiCache.constructor as any)({\r\n        maxSize: 20, // Even smaller capacity\r\n        defaultTTL: 5 * 60 * 1000,\r\n        enablePersistence: false,\r\n        lruEnabled: true\r\n      });\r\n\r\n      await testCache.set('key1', 'val1'); // ~6 bytes\r\n      await testCache.set('key2', 'val2'); // ~6 bytes\r\n      await testCache.set('key3', 'val3'); // ~6 bytes\r\n\r\n      // Access key1 to make it most recently used\r\n      await testCache.get('key1');\r\n\r\n      // Add key4, should evict key2 (least recently used)\r\n      await testCache.set('key4', 'val4'); // ~6 bytes\r\n\r\n      expect(await testCache.get('key1')).toEqual('val1'); // Still there\r\n      expect(await testCache.get('key2')).toBeNull(); // Should be evicted\r\n      expect(await testCache.get('key3')).toEqual('val3');\r\n      expect(await testCache.get('key4')).toEqual('val4');\r\n    });\r\n  });\r\n\r\n  describe('Cache Persistence', () => {\r\n    it('should persist cache to localStorage', async () => {\r\n      const testData = { persistent: true };\r\n\r\n      await apiCache.set('persistent-key', testData);\r\n\r\n      // Force persistence by calling the private method\r\n      (apiCache as any).persistCache();\r\n\r\n      // Check that localStorage.setItem was called\r\n      expect(localStorageMock.setItem).toHaveBeenCalled();\r\n      const callArgs = localStorageMock.setItem.mock.calls.find(call =>\r\n        call[0] === 'points-companion-cache-v2'\r\n      );\r\n      expect(callArgs).toBeTruthy();\r\n    });\r\n\r\n    it('should load cache from localStorage on initialization', () => {\r\n      const mockCacheData = {\r\n        data: [['loaded-key', {\r\n          data: 'loaded-value',\r\n          timestamp: Date.now(),\r\n          ttl: 3600000,\r\n          accessCount: 0,\r\n          lastAccessed: Date.now(),\r\n          size: 26,\r\n          tags: []\r\n        }]],\r\n        timestamp: Date.now()\r\n      };\r\n\r\n      localStorageMock.getItem.mockReturnValue(JSON.stringify(mockCacheData));\r\n\r\n      // Create new cache instance to test loading\r\n      const newCache = new (apiCache.constructor as any)({\r\n        maxSize: 100 * 1024 * 1024,\r\n        defaultTTL: 5 * 60 * 1000,\r\n        enablePersistence: true,\r\n        persistenceKey: 'test-cache-key',\r\n        lruEnabled: true\r\n      });\r\n\r\n      // The cache should have loaded the data\r\n      expect(localStorageMock.getItem).toHaveBeenCalledWith('test-cache-key');\r\n    });\r\n  });\r\n\r\n  describe('Cache Statistics', () => {\r\n    it('should track cache hits and misses', async () => {\r\n      // Clear cache and reset stats\r\n      apiCache.clear();\r\n      (apiCache as any).stats.hits = 0;\r\n      (apiCache as any).stats.misses = 0;\r\n\r\n      await apiCache.set('stats-key', 'stats-value');\r\n\r\n      // Hit\r\n      await apiCache.get('stats-key');\r\n      // Miss\r\n      await apiCache.get('non-existent-key');\r\n\r\n      const stats = apiCache.getStats();\r\n      expect(stats.hits).toBe(1);\r\n      expect(stats.misses).toBe(1);\r\n      expect(apiCache.getHitRate()).toBe(0.5);\r\n    });\r\n\r\n    it('should track cache size and capacity', async () => {\r\n      await apiCache.set('size-key1', 'value1');\r\n      await apiCache.set('size-key2', 'value2');\r\n\r\n      const stats = apiCache.getStats();\r\n      expect(stats.size).toBeGreaterThan(0);\r\n      expect(stats.itemCount).toBe(2);\r\n    });\r\n  });\r\n\r\n  describe('Request Deduplication', () => {\r\n    it('should deduplicate concurrent requests for the same key', async () => {\r\n      let callCount = 0;\r\n      const mockFetcher = jest.fn(() => {\r\n        callCount++;\r\n        return Promise.resolve('fetched-data');\r\n      });\r\n\r\n      // Simulate concurrent requests\r\n      const promises = [\r\n        apiCache.dedupe('dedupe-key', mockFetcher),\r\n        apiCache.dedupe('dedupe-key', mockFetcher),\r\n        apiCache.dedupe('dedupe-key', mockFetcher),\r\n      ];\r\n\r\n      const results = await Promise.all(promises);\r\n\r\n      // All should return the same data\r\n      results.forEach((result: any) => {\r\n        expect(result).toBe('fetched-data');\r\n      });\r\n\r\n      // But fetcher should only be called once\r\n      expect(callCount).toBe(1);\r\n    });\r\n\r\n    it('should handle fetch errors gracefully', async () => {\r\n      const mockFetcher = jest.fn(() => Promise.reject(new Error('Fetch failed')));\r\n\r\n      await expect(\r\n        apiCache.dedupe('error-key', mockFetcher)\r\n      ).rejects.toThrow('Fetch failed');\r\n\r\n      // Should not cache the error\r\n      expect(await apiCache.get('error-key')).toBeNull();\r\n    });\r\n  });\r\n\r\n  describe('Tag-based Invalidation', () => {\r\n    it('should invalidate entries by tag', async () => {\r\n      await apiCache.set('tagged-key1', 'value1', { tags: ['tag1'] });\r\n      await apiCache.set('tagged-key2', 'value2', { tags: ['tag1', 'tag2'] });\r\n      await apiCache.set('untagged-key', 'value3');\r\n\r\n      apiCache.clearByTags(['tag1']);\r\n\r\n      expect(await apiCache.get('tagged-key1')).toBeNull();\r\n      expect(await apiCache.get('tagged-key2')).toBeNull();\r\n      expect(await apiCache.get('untagged-key')).toEqual('value3');\r\n    });\r\n\r\n    it('should handle multiple tags correctly', async () => {\r\n      await apiCache.set('multi-key', 'value', { tags: ['tag1', 'tag2', 'tag3'] });\r\n\r\n      apiCache.clearByTags(['tag2']);\r\n\r\n      expect(await apiCache.get('multi-key')).toBeNull();\r\n    });\r\n  });\r\n\r\n  describe('Performance and Memory Management', () => {\r\n    it('should handle large datasets efficiently', async () => {\r\n      const largeData = Array.from({ length: 1000 }, (_, i) => ({\r\n        id: i,\r\n        data: 'x'.repeat(1000), // 1KB per item\r\n      }));\r\n\r\n      const startTime = performance.now();\r\n\r\n      for (let i = 0; i < largeData.length; i++) {\r\n        await apiCache.set(`large-key-${i}`, largeData[i]);\r\n      }\r\n\r\n      const endTime = performance.now();\r\n      const duration = endTime - startTime;\r\n\r\n      // Should complete within reasonable time (adjust threshold as needed)\r\n      expect(duration).toBeLessThan(5000); // 5 seconds max\r\n\r\n      // Should be able to retrieve items\r\n      const retrieved = await apiCache.get('large-key-500');\r\n      expect(retrieved).toEqual(largeData[500]);\r\n    });\r\n\r\n    it('should maintain performance under concurrent load', async () => {\r\n      const concurrentOperations = 100;\r\n      const promises = [];\r\n\r\n      for (let i = 0; i < concurrentOperations; i++) {\r\n        promises.push(apiCache.set(`concurrent-key-${i}`, `value-${i}`));\r\n      }\r\n\r\n      const startTime = performance.now();\r\n      await Promise.all(promises);\r\n      const endTime = performance.now();\r\n\r\n      expect(endTime - startTime).toBeLessThan(2000); // 2 seconds max\r\n\r\n      // Verify all operations completed\r\n      for (let i = 0; i < concurrentOperations; i++) {\r\n        const value = await apiCache.get(`concurrent-key-${i}`);\r\n        expect(value).toBe(`value-${i}`);\r\n      }\r\n    });\r\n  });\r\n});\r\n"],"mappings":"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","ignoreList":[]}