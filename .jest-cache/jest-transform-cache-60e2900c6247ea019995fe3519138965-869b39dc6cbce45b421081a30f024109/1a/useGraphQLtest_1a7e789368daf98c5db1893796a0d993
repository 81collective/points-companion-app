a95db776d8897a4a4ed081a9eca2199d
"use strict";

// Mock Apollo Client
_getJestObj().mock('@apollo/client', () => ({
  useQuery: jest.fn(),
  useMutation: jest.fn(),
  gql: jest.fn(template => template.join(''))
}));
var _react = _interopRequireDefault(require("react"));
var _testUtils = require("../testUtils");
var _useGraphQL = require("../../lib/graphql/useGraphQL");
var _client = require("@apollo/client");
function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }
function _getJestObj() {
  const {
    jest
  } = require("@jest/globals");
  _getJestObj = () => jest;
  return jest;
}
// Setup mocks before tests
beforeAll(() => {
  (0, _testUtils.setupTests)();
});
const mockUseQuery = _client.useQuery;
const mockUseMutation = _client.useMutation;
describe('GraphQL Hooks', () => {
  beforeEach(() => {
    jest.clearAllMocks();
  });
  describe('useBusinessesQuery', () => {
    it('should return businesses data when query succeeds', async () => {
      const mockBusinesses = [{
        id: '1',
        name: 'Test Business',
        address: '123 Test St',
        latitude: 40.7128,
        longitude: -74.0060,
        rating: 4.5,
        priceLevel: 2,
        distance: 1000,
        category: 'restaurant',
        placeId: 'test_place_id'
      }];
      mockUseQuery.mockReturnValue({
        data: {
          businesses: mockBusinesses
        },
        loading: false,
        error: undefined,
        refetch: jest.fn()
      });

      // Test component that uses the hook
      const TestComponent = () => {
        const {
          data,
          loading,
          error
        } = (0, _useGraphQL.useBusinessesQuery)({
          category: 'restaurant',
          limit: 10
        });
        if (loading) return /*#__PURE__*/_react.default.createElement("div", null, "Loading...");
        if (error) return /*#__PURE__*/_react.default.createElement("div", null, "Error: ", error.message);
        return /*#__PURE__*/_react.default.createElement("div", null, data?.businesses.map(business => /*#__PURE__*/_react.default.createElement("div", {
          key: business.id,
          "data-testid": `business-${business.id}`
        }, business.name)));
      };
      (0, _testUtils.customRender)(/*#__PURE__*/_react.default.createElement(TestComponent, null));
      await (0, _testUtils.waitFor)(() => {
        expect(_testUtils.screen.getByTestId('business-1')).toBeInTheDocument();
        expect(_testUtils.screen.getByText('Test Business')).toBeInTheDocument();
      });
    });
    it('should handle loading state correctly', () => {
      mockUseQuery.mockReturnValue({
        data: undefined,
        loading: true,
        error: undefined,
        refetch: jest.fn()
      });
      const TestComponent = () => {
        const {
          loading
        } = (0, _useGraphQL.useBusinessesQuery)({
          category: 'restaurant',
          limit: 10
        });
        return /*#__PURE__*/_react.default.createElement("div", null, loading ? 'Loading...' : 'Loaded');
      };
      (0, _testUtils.customRender)(/*#__PURE__*/_react.default.createElement(TestComponent, null));
      expect(_testUtils.screen.getByText('Loading...')).toBeInTheDocument();
    });
    it('should handle error state correctly', () => {
      const mockError = new Error('GraphQL Error');
      mockUseQuery.mockReturnValue({
        data: undefined,
        loading: false,
        error: mockError,
        refetch: jest.fn()
      });
      const TestComponent = () => {
        const {
          error
        } = (0, _useGraphQL.useBusinessesQuery)({
          category: 'restaurant',
          limit: 10
        });
        return /*#__PURE__*/_react.default.createElement("div", null, error ? `Error: ${error.message}` : 'No error');
      };
      (0, _testUtils.customRender)(/*#__PURE__*/_react.default.createElement(TestComponent, null));
      expect(_testUtils.screen.getByText('Error: GraphQL Error')).toBeInTheDocument();
    });
    it('should pass correct variables to query', () => {
      const variables = {
        category: 'restaurant',
        limit: 20,
        offset: 10
      };
      mockUseQuery.mockReturnValue({
        data: {
          businesses: []
        },
        loading: false,
        error: undefined,
        refetch: jest.fn()
      });
      (0, _useGraphQL.useBusinessesQuery)(variables);
      expect(mockUseQuery).toHaveBeenCalledWith(expect.objectContaining({
        variables
      }));
    });
  });
  describe('useBusinessDetailsQuery', () => {
    it('should return business details with proper structure', async () => {
      const mockBusinessDetails = {
        id: '1',
        name: 'Detailed Business',
        address: '123 Detail St',
        latitude: 40.7128,
        longitude: -74.0060,
        rating: 4.5,
        priceLevel: 3,
        distance: 500,
        category: 'restaurant',
        placeId: 'detailed_place_id',
        reviews: [{
          id: 'review1',
          author: 'John Doe',
          rating: 5,
          text: 'Great place!',
          time: '2023-01-01'
        }],
        photos: [{
          id: 'photo1',
          url: 'https://example.com/photo1.jpg',
          width: 800,
          height: 600
        }],
        hours: {
          monday: '9:00 AM - 10:00 PM',
          tuesday: '9:00 AM - 10:00 PM',
          wednesday: '9:00 AM - 10:00 PM',
          thursday: '9:00 AM - 10:00 PM',
          friday: '9:00 AM - 11:00 PM',
          saturday: '10:00 AM - 11:00 PM',
          sunday: '10:00 AM - 9:00 PM'
        }
      };
      mockUseQuery.mockReturnValue({
        data: {
          business: mockBusinessDetails
        },
        loading: false,
        error: undefined,
        refetch: jest.fn()
      });
      const TestComponent = () => {
        const {
          data
        } = (0, _useGraphQL.useBusinessDetailsQuery)('1');
        return /*#__PURE__*/_react.default.createElement("div", null, data?.business && /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, /*#__PURE__*/_react.default.createElement("h1", null, data.business.name), /*#__PURE__*/_react.default.createElement("p", null, data.business.address), /*#__PURE__*/_react.default.createElement("div", null, "Rating: ", data.business.rating), /*#__PURE__*/_react.default.createElement("div", null, "Reviews: ", data.business.reviews.length), /*#__PURE__*/_react.default.createElement("div", null, "Photos: ", data.business.photos.length)));
      };
      (0, _testUtils.customRender)(/*#__PURE__*/_react.default.createElement(TestComponent, null));
      await (0, _testUtils.waitFor)(() => {
        expect(_testUtils.screen.getByText('Detailed Business')).toBeInTheDocument();
        expect(_testUtils.screen.getByText('123 Detail St')).toBeInTheDocument();
        expect(_testUtils.screen.getByText('Rating: 4.5')).toBeInTheDocument();
        expect(_testUtils.screen.getByText('Reviews: 1')).toBeInTheDocument();
        expect(_testUtils.screen.getByText('Photos: 1')).toBeInTheDocument();
      });
    });
  });
  describe('useNearbyBusinessesQuery', () => {
    it('should handle location-based queries correctly', async () => {
      const mockNearbyBusinesses = [{
        id: 'nearby1',
        name: 'Nearby Restaurant',
        distance: 200,
        latitude: 40.7128,
        longitude: -74.0060
      }, {
        id: 'nearby2',
        name: 'Another Nearby Place',
        distance: 500,
        latitude: 40.7130,
        longitude: -74.0062
      }];
      mockUseQuery.mockReturnValue({
        data: {
          nearbyBusinesses: mockNearbyBusinesses
        },
        loading: false,
        error: undefined,
        refetch: jest.fn()
      });
      const TestComponent = () => {
        const {
          data
        } = (0, _useGraphQL.useNearbyBusinessesQuery)({
          latitude: 40.7128,
          longitude: -74.0060,
          radius: 1000,
          category: 'restaurant'
        });
        return /*#__PURE__*/_react.default.createElement("div", null, data?.nearbyBusinesses.map(business => /*#__PURE__*/_react.default.createElement("div", {
          key: business.id,
          "data-testid": `nearby-${business.id}`
        }, business.name, " - ", business.distance, "m")));
      };
      (0, _testUtils.customRender)(/*#__PURE__*/_react.default.createElement(TestComponent, null));
      await (0, _testUtils.waitFor)(() => {
        expect(_testUtils.screen.getByTestId('nearby-nearby1')).toBeInTheDocument();
        expect(_testUtils.screen.getByTestId('nearby-nearby2')).toBeInTheDocument();
        expect(_testUtils.screen.getByText('Nearby Restaurant - 200m')).toBeInTheDocument();
        expect(_testUtils.screen.getByText('Another Nearby Place - 500m')).toBeInTheDocument();
      });
    });
    it('should sort businesses by distance', async () => {
      const unsortedBusinesses = [{
        id: 'far',
        name: 'Far Business',
        distance: 1000,
        latitude: 40.7128,
        longitude: -74.0060
      }, {
        id: 'close',
        name: 'Close Business',
        distance: 100,
        latitude: 40.7128,
        longitude: -74.0060
      }];
      mockUseQuery.mockReturnValue({
        data: {
          nearbyBusinesses: unsortedBusinesses
        },
        loading: false,
        error: undefined,
        refetch: jest.fn()
      });
      const TestComponent = () => {
        const {
          data
        } = (0, _useGraphQL.useNearbyBusinessesQuery)({
          latitude: 40.7128,
          longitude: -74.0060,
          radius: 1000
        });
        return /*#__PURE__*/_react.default.createElement("div", null, data?.nearbyBusinesses.map(business => /*#__PURE__*/_react.default.createElement("div", {
          key: business.id
        }, business.name)));
      };
      (0, _testUtils.customRender)(/*#__PURE__*/_react.default.createElement(TestComponent, null));
      await (0, _testUtils.waitFor)(() => {
        const businessElements = _testUtils.screen.getAllByText(/Business/);
        // Should be sorted by distance (close first)
        expect(businessElements[0]).toHaveTextContent('Close Business');
        expect(businessElements[1]).toHaveTextContent('Far Business');
      });
    });
  });
  describe('GraphQL Error Handling', () => {
    it('should handle network errors gracefully', () => {
      const networkError = new Error('Network error');
      mockUseQuery.mockReturnValue({
        data: undefined,
        loading: false,
        error: networkError,
        refetch: jest.fn()
      });
      const TestComponent = () => {
        const {
          error
        } = (0, _useGraphQL.useBusinessesQuery)({
          category: 'restaurant'
        });
        return /*#__PURE__*/_react.default.createElement("div", null, error ? 'Network Error Occurred' : 'No Error');
      };
      (0, _testUtils.customRender)(/*#__PURE__*/_react.default.createElement(TestComponent, null));
      expect(_testUtils.screen.getByText('Network Error Occurred')).toBeInTheDocument();
    });
    it('should handle GraphQL validation errors', () => {
      const validationError = {
        message: 'Validation error',
        graphQLErrors: [{
          message: 'Invalid category parameter',
          extensions: {
            code: 'VALIDATION_ERROR'
          }
        }]
      };
      mockUseQuery.mockReturnValue({
        data: undefined,
        loading: false,
        error: validationError,
        refetch: jest.fn()
      });
      const TestComponent = () => {
        const {
          error
        } = (0, _useGraphQL.useBusinessesQuery)({
          category: 'invalid'
        });
        return /*#__PURE__*/_react.default.createElement("div", null, error ? 'Validation Error' : 'No Error');
      };
      (0, _testUtils.customRender)(/*#__PURE__*/_react.default.createElement(TestComponent, null));
      expect(_testUtils.screen.getByText('Validation Error')).toBeInTheDocument();
    });
  });
  describe('GraphQL Performance', () => {
    it('should cache query results appropriately', async () => {
      const mockData = {
        businesses: [{
          id: '1',
          name: 'Cached Business'
        }]
      };
      mockUseQuery.mockReturnValue({
        data: mockData,
        loading: false,
        error: undefined,
        refetch: jest.fn()
      });
      const TestComponent = () => {
        const {
          data
        } = (0, _useGraphQL.useBusinessesQuery)({
          category: 'restaurant'
        });
        return /*#__PURE__*/_react.default.createElement("div", null, data?.businesses[0]?.name);
      };
      const {
        rerender
      } = (0, _testUtils.customRender)(/*#__PURE__*/_react.default.createElement(TestComponent, null));
      await (0, _testUtils.waitFor)(() => {
        expect(_testUtils.screen.getByText('Cached Business')).toBeInTheDocument();
      });

      // Re-render should use cached data
      rerender(/*#__PURE__*/_react.default.createElement(TestComponent, null));
      expect(_testUtils.screen.getByText('Cached Business')).toBeInTheDocument();
      expect(mockUseQuery).toHaveBeenCalledTimes(1); // Should not refetch
    });
    it('should handle concurrent queries efficiently', async () => {
      const mockData = {
        businesses: [{
          id: '1',
          name: 'Concurrent Business'
        }]
      };
      mockUseQuery.mockReturnValue({
        data: mockData,
        loading: false,
        error: undefined,
        refetch: jest.fn()
      });
      const TestComponent = () => {
        const query1 = (0, _useGraphQL.useBusinessesQuery)({
          category: 'restaurant'
        });
        const query2 = (0, _useGraphQL.useBusinessesQuery)({
          category: 'restaurant'
        });
        return /*#__PURE__*/_react.default.createElement("div", null, query1.data?.businesses[0]?.name, query2.data?.businesses[0]?.name);
      };
      (0, _testUtils.customRender)(/*#__PURE__*/_react.default.createElement(TestComponent, null));
      await (0, _testUtils.waitFor)(() => {
        expect(_testUtils.screen.getByText('Concurrent BusinessConcurrent Business')).toBeInTheDocument();
      });

      // Should deduplicate the query
      expect(mockUseQuery).toHaveBeenCalledTimes(1);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJ1c2VRdWVyeSIsImplc3QiLCJmbiIsInVzZU11dGF0aW9uIiwiZ3FsIiwidGVtcGxhdGUiLCJqb2luIiwiX3JlYWN0IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfdGVzdFV0aWxzIiwiX3VzZUdyYXBoUUwiLCJfY2xpZW50IiwiZSIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiYmVmb3JlQWxsIiwic2V0dXBUZXN0cyIsIm1vY2tVc2VRdWVyeSIsIm1vY2tVc2VNdXRhdGlvbiIsImRlc2NyaWJlIiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJpdCIsIm1vY2tCdXNpbmVzc2VzIiwiaWQiLCJuYW1lIiwiYWRkcmVzcyIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwicmF0aW5nIiwicHJpY2VMZXZlbCIsImRpc3RhbmNlIiwiY2F0ZWdvcnkiLCJwbGFjZUlkIiwibW9ja1JldHVyblZhbHVlIiwiZGF0YSIsImJ1c2luZXNzZXMiLCJsb2FkaW5nIiwiZXJyb3IiLCJ1bmRlZmluZWQiLCJyZWZldGNoIiwiVGVzdENvbXBvbmVudCIsInVzZUJ1c2luZXNzZXNRdWVyeSIsImxpbWl0IiwiY3JlYXRlRWxlbWVudCIsIm1lc3NhZ2UiLCJtYXAiLCJidXNpbmVzcyIsImtleSIsImN1c3RvbVJlbmRlciIsIndhaXRGb3IiLCJleHBlY3QiLCJzY3JlZW4iLCJnZXRCeVRlc3RJZCIsInRvQmVJblRoZURvY3VtZW50IiwiZ2V0QnlUZXh0IiwibW9ja0Vycm9yIiwiRXJyb3IiLCJ2YXJpYWJsZXMiLCJvZmZzZXQiLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsIm9iamVjdENvbnRhaW5pbmciLCJtb2NrQnVzaW5lc3NEZXRhaWxzIiwicmV2aWV3cyIsImF1dGhvciIsInRleHQiLCJ0aW1lIiwicGhvdG9zIiwidXJsIiwid2lkdGgiLCJoZWlnaHQiLCJob3VycyIsIm1vbmRheSIsInR1ZXNkYXkiLCJ3ZWRuZXNkYXkiLCJ0aHVyc2RheSIsImZyaWRheSIsInNhdHVyZGF5Iiwic3VuZGF5IiwidXNlQnVzaW5lc3NEZXRhaWxzUXVlcnkiLCJGcmFnbWVudCIsImxlbmd0aCIsIm1vY2tOZWFyYnlCdXNpbmVzc2VzIiwibmVhcmJ5QnVzaW5lc3NlcyIsInVzZU5lYXJieUJ1c2luZXNzZXNRdWVyeSIsInJhZGl1cyIsInVuc29ydGVkQnVzaW5lc3NlcyIsImJ1c2luZXNzRWxlbWVudHMiLCJnZXRBbGxCeVRleHQiLCJ0b0hhdmVUZXh0Q29udGVudCIsIm5ldHdvcmtFcnJvciIsInZhbGlkYXRpb25FcnJvciIsImdyYXBoUUxFcnJvcnMiLCJleHRlbnNpb25zIiwiY29kZSIsIm1vY2tEYXRhIiwicmVyZW5kZXIiLCJ0b0hhdmVCZWVuQ2FsbGVkVGltZXMiLCJxdWVyeTEiLCJxdWVyeTIiXSwic291cmNlcyI6WyJ1c2VHcmFwaFFMLnRlc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IGN1c3RvbVJlbmRlciwgc2NyZWVuLCB3YWl0Rm9yLCBzZXR1cFRlc3RzIH0gZnJvbSAnLi4vdGVzdFV0aWxzJztcclxuaW1wb3J0IHsgdXNlQnVzaW5lc3Nlc1F1ZXJ5LCB1c2VCdXNpbmVzc0RldGFpbHNRdWVyeSwgdXNlTmVhcmJ5QnVzaW5lc3Nlc1F1ZXJ5IH0gZnJvbSAnLi4vLi4vbGliL2dyYXBocWwvdXNlR3JhcGhRTCc7XHJcblxyXG4vLyBTZXR1cCBtb2NrcyBiZWZvcmUgdGVzdHNcclxuYmVmb3JlQWxsKCgpID0+IHtcclxuICBzZXR1cFRlc3RzKCk7XHJcbn0pO1xyXG5cclxuLy8gTW9jayBBcG9sbG8gQ2xpZW50XHJcbmplc3QubW9jaygnQGFwb2xsby9jbGllbnQnLCAoKSA9PiAoe1xyXG4gIHVzZVF1ZXJ5OiBqZXN0LmZuKCksXHJcbiAgdXNlTXV0YXRpb246IGplc3QuZm4oKSxcclxuICBncWw6IGplc3QuZm4oKHRlbXBsYXRlOiBUZW1wbGF0ZVN0cmluZ3NBcnJheSkgPT4gdGVtcGxhdGUuam9pbignJykpLFxyXG59KSk7XHJcblxyXG5pbXBvcnQgeyB1c2VRdWVyeSwgdXNlTXV0YXRpb24gfSBmcm9tICdAYXBvbGxvL2NsaWVudCc7XHJcblxyXG5jb25zdCBtb2NrVXNlUXVlcnkgPSB1c2VRdWVyeSBhcyBqZXN0Lk1vY2tlZEZ1bmN0aW9uPHR5cGVvZiB1c2VRdWVyeT47XHJcbmNvbnN0IG1vY2tVc2VNdXRhdGlvbiA9IHVzZU11dGF0aW9uIGFzIGplc3QuTW9ja2VkRnVuY3Rpb248dHlwZW9mIHVzZU11dGF0aW9uPjtcclxuXHJcbmRlc2NyaWJlKCdHcmFwaFFMIEhvb2tzJywgKCkgPT4ge1xyXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCd1c2VCdXNpbmVzc2VzUXVlcnknLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiBidXNpbmVzc2VzIGRhdGEgd2hlbiBxdWVyeSBzdWNjZWVkcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgbW9ja0J1c2luZXNzZXMgPSBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaWQ6ICcxJyxcclxuICAgICAgICAgIG5hbWU6ICdUZXN0IEJ1c2luZXNzJyxcclxuICAgICAgICAgIGFkZHJlc3M6ICcxMjMgVGVzdCBTdCcsXHJcbiAgICAgICAgICBsYXRpdHVkZTogNDAuNzEyOCxcclxuICAgICAgICAgIGxvbmdpdHVkZTogLTc0LjAwNjAsXHJcbiAgICAgICAgICByYXRpbmc6IDQuNSxcclxuICAgICAgICAgIHByaWNlTGV2ZWw6IDIsXHJcbiAgICAgICAgICBkaXN0YW5jZTogMTAwMCxcclxuICAgICAgICAgIGNhdGVnb3J5OiAncmVzdGF1cmFudCcsXHJcbiAgICAgICAgICBwbGFjZUlkOiAndGVzdF9wbGFjZV9pZCcsXHJcbiAgICAgICAgfSxcclxuICAgICAgXTtcclxuXHJcbiAgICAgIG1vY2tVc2VRdWVyeS5tb2NrUmV0dXJuVmFsdWUoe1xyXG4gICAgICAgIGRhdGE6IHsgYnVzaW5lc3NlczogbW9ja0J1c2luZXNzZXMgfSxcclxuICAgICAgICBsb2FkaW5nOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogdW5kZWZpbmVkLFxyXG4gICAgICAgIHJlZmV0Y2g6IGplc3QuZm4oKSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBUZXN0IGNvbXBvbmVudCB0aGF0IHVzZXMgdGhlIGhvb2tcclxuICAgICAgY29uc3QgVGVzdENvbXBvbmVudCA9ICgpID0+IHtcclxuICAgICAgICBjb25zdCB7IGRhdGEsIGxvYWRpbmcsIGVycm9yIH0gPSB1c2VCdXNpbmVzc2VzUXVlcnkoe1xyXG4gICAgICAgICAgY2F0ZWdvcnk6ICdyZXN0YXVyYW50JyxcclxuICAgICAgICAgIGxpbWl0OiAxMCxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKGxvYWRpbmcpIHJldHVybiA8ZGl2PkxvYWRpbmcuLi48L2Rpdj47XHJcbiAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gPGRpdj5FcnJvcjoge2Vycm9yLm1lc3NhZ2V9PC9kaXY+O1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAge2RhdGE/LmJ1c2luZXNzZXMubWFwKGJ1c2luZXNzID0+IChcclxuICAgICAgICAgICAgICA8ZGl2IGtleT17YnVzaW5lc3MuaWR9IGRhdGEtdGVzdGlkPXtgYnVzaW5lc3MtJHtidXNpbmVzcy5pZH1gfT5cclxuICAgICAgICAgICAgICAgIHtidXNpbmVzcy5uYW1lfVxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICApKX1cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjdXN0b21SZW5kZXIoPFRlc3RDb21wb25lbnQgLz4pO1xyXG5cclxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XHJcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnYnVzaW5lc3MtMScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xyXG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdUZXN0IEJ1c2luZXNzJykpLnRvQmVJblRoZURvY3VtZW50KCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbG9hZGluZyBzdGF0ZSBjb3JyZWN0bHknLCAoKSA9PiB7XHJcbiAgICAgIG1vY2tVc2VRdWVyeS5tb2NrUmV0dXJuVmFsdWUoe1xyXG4gICAgICAgIGRhdGE6IHVuZGVmaW5lZCxcclxuICAgICAgICBsb2FkaW5nOiB0cnVlLFxyXG4gICAgICAgIGVycm9yOiB1bmRlZmluZWQsXHJcbiAgICAgICAgcmVmZXRjaDogamVzdC5mbigpLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IFRlc3RDb21wb25lbnQgPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgeyBsb2FkaW5nIH0gPSB1c2VCdXNpbmVzc2VzUXVlcnkoe1xyXG4gICAgICAgICAgY2F0ZWdvcnk6ICdyZXN0YXVyYW50JyxcclxuICAgICAgICAgIGxpbWl0OiAxMCxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIDxkaXY+e2xvYWRpbmcgPyAnTG9hZGluZy4uLicgOiAnTG9hZGVkJ308L2Rpdj47XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjdXN0b21SZW5kZXIoPFRlc3RDb21wb25lbnQgLz4pO1xyXG5cclxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0xvYWRpbmcuLi4nKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGVycm9yIHN0YXRlIGNvcnJlY3RseScsICgpID0+IHtcclxuICAgICAgY29uc3QgbW9ja0Vycm9yID0gbmV3IEVycm9yKCdHcmFwaFFMIEVycm9yJyk7XHJcbiAgICAgIG1vY2tVc2VRdWVyeS5tb2NrUmV0dXJuVmFsdWUoe1xyXG4gICAgICAgIGRhdGE6IHVuZGVmaW5lZCxcclxuICAgICAgICBsb2FkaW5nOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogbW9ja0Vycm9yLFxyXG4gICAgICAgIHJlZmV0Y2g6IGplc3QuZm4oKSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCBUZXN0Q29tcG9uZW50ID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IHVzZUJ1c2luZXNzZXNRdWVyeSh7XHJcbiAgICAgICAgICBjYXRlZ29yeTogJ3Jlc3RhdXJhbnQnLFxyXG4gICAgICAgICAgbGltaXQ6IDEwLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gPGRpdj57ZXJyb3IgPyBgRXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gIDogJ05vIGVycm9yJ308L2Rpdj47XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjdXN0b21SZW5kZXIoPFRlc3RDb21wb25lbnQgLz4pO1xyXG5cclxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0Vycm9yOiBHcmFwaFFMIEVycm9yJykpLnRvQmVJblRoZURvY3VtZW50KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHBhc3MgY29ycmVjdCB2YXJpYWJsZXMgdG8gcXVlcnknLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHZhcmlhYmxlcyA9IHtcclxuICAgICAgICBjYXRlZ29yeTogJ3Jlc3RhdXJhbnQnLFxyXG4gICAgICAgIGxpbWl0OiAyMCxcclxuICAgICAgICBvZmZzZXQ6IDEwLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgbW9ja1VzZVF1ZXJ5Lm1vY2tSZXR1cm5WYWx1ZSh7XHJcbiAgICAgICAgZGF0YTogeyBidXNpbmVzc2VzOiBbXSB9LFxyXG4gICAgICAgIGxvYWRpbmc6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiB1bmRlZmluZWQsXHJcbiAgICAgICAgcmVmZXRjaDogamVzdC5mbigpLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHVzZUJ1c2luZXNzZXNRdWVyeSh2YXJpYWJsZXMpO1xyXG5cclxuICAgICAgZXhwZWN0KG1vY2tVc2VRdWVyeSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXHJcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xyXG4gICAgICAgICAgdmFyaWFibGVzLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ3VzZUJ1c2luZXNzRGV0YWlsc1F1ZXJ5JywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gYnVzaW5lc3MgZGV0YWlscyB3aXRoIHByb3BlciBzdHJ1Y3R1cmUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1vY2tCdXNpbmVzc0RldGFpbHMgPSB7XHJcbiAgICAgICAgaWQ6ICcxJyxcclxuICAgICAgICBuYW1lOiAnRGV0YWlsZWQgQnVzaW5lc3MnLFxyXG4gICAgICAgIGFkZHJlc3M6ICcxMjMgRGV0YWlsIFN0JyxcclxuICAgICAgICBsYXRpdHVkZTogNDAuNzEyOCxcclxuICAgICAgICBsb25naXR1ZGU6IC03NC4wMDYwLFxyXG4gICAgICAgIHJhdGluZzogNC41LFxyXG4gICAgICAgIHByaWNlTGV2ZWw6IDMsXHJcbiAgICAgICAgZGlzdGFuY2U6IDUwMCxcclxuICAgICAgICBjYXRlZ29yeTogJ3Jlc3RhdXJhbnQnLFxyXG4gICAgICAgIHBsYWNlSWQ6ICdkZXRhaWxlZF9wbGFjZV9pZCcsXHJcbiAgICAgICAgcmV2aWV3czogW1xyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBpZDogJ3JldmlldzEnLFxyXG4gICAgICAgICAgICBhdXRob3I6ICdKb2huIERvZScsXHJcbiAgICAgICAgICAgIHJhdGluZzogNSxcclxuICAgICAgICAgICAgdGV4dDogJ0dyZWF0IHBsYWNlIScsXHJcbiAgICAgICAgICAgIHRpbWU6ICcyMDIzLTAxLTAxJyxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgXSxcclxuICAgICAgICBwaG90b3M6IFtcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgaWQ6ICdwaG90bzEnLFxyXG4gICAgICAgICAgICB1cmw6ICdodHRwczovL2V4YW1wbGUuY29tL3Bob3RvMS5qcGcnLFxyXG4gICAgICAgICAgICB3aWR0aDogODAwLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IDYwMCxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgXSxcclxuICAgICAgICBob3Vyczoge1xyXG4gICAgICAgICAgbW9uZGF5OiAnOTowMCBBTSAtIDEwOjAwIFBNJyxcclxuICAgICAgICAgIHR1ZXNkYXk6ICc5OjAwIEFNIC0gMTA6MDAgUE0nLFxyXG4gICAgICAgICAgd2VkbmVzZGF5OiAnOTowMCBBTSAtIDEwOjAwIFBNJyxcclxuICAgICAgICAgIHRodXJzZGF5OiAnOTowMCBBTSAtIDEwOjAwIFBNJyxcclxuICAgICAgICAgIGZyaWRheTogJzk6MDAgQU0gLSAxMTowMCBQTScsXHJcbiAgICAgICAgICBzYXR1cmRheTogJzEwOjAwIEFNIC0gMTE6MDAgUE0nLFxyXG4gICAgICAgICAgc3VuZGF5OiAnMTA6MDAgQU0gLSA5OjAwIFBNJyxcclxuICAgICAgICB9LFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgbW9ja1VzZVF1ZXJ5Lm1vY2tSZXR1cm5WYWx1ZSh7XHJcbiAgICAgICAgZGF0YTogeyBidXNpbmVzczogbW9ja0J1c2luZXNzRGV0YWlscyB9LFxyXG4gICAgICAgIGxvYWRpbmc6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiB1bmRlZmluZWQsXHJcbiAgICAgICAgcmVmZXRjaDogamVzdC5mbigpLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IFRlc3RDb21wb25lbnQgPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgeyBkYXRhIH0gPSB1c2VCdXNpbmVzc0RldGFpbHNRdWVyeSgnMScpO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAge2RhdGE/LmJ1c2luZXNzICYmIChcclxuICAgICAgICAgICAgICA8PlxyXG4gICAgICAgICAgICAgICAgPGgxPntkYXRhLmJ1c2luZXNzLm5hbWV9PC9oMT5cclxuICAgICAgICAgICAgICAgIDxwPntkYXRhLmJ1c2luZXNzLmFkZHJlc3N9PC9wPlxyXG4gICAgICAgICAgICAgICAgPGRpdj5SYXRpbmc6IHtkYXRhLmJ1c2luZXNzLnJhdGluZ308L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXY+UmV2aWV3czoge2RhdGEuYnVzaW5lc3MucmV2aWV3cy5sZW5ndGh9PC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2PlBob3Rvczoge2RhdGEuYnVzaW5lc3MucGhvdG9zLmxlbmd0aH08L2Rpdj5cclxuICAgICAgICAgICAgICA8Lz5cclxuICAgICAgICAgICAgKX1cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjdXN0b21SZW5kZXIoPFRlc3RDb21wb25lbnQgLz4pO1xyXG5cclxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XHJcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0RldGFpbGVkIEJ1c2luZXNzJykpLnRvQmVJblRoZURvY3VtZW50KCk7XHJcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJzEyMyBEZXRhaWwgU3QnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcclxuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnUmF0aW5nOiA0LjUnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcclxuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnUmV2aWV3czogMScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xyXG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdQaG90b3M6IDEnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ3VzZU5lYXJieUJ1c2luZXNzZXNRdWVyeScsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGxvY2F0aW9uLWJhc2VkIHF1ZXJpZXMgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBtb2NrTmVhcmJ5QnVzaW5lc3NlcyA9IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZDogJ25lYXJieTEnLFxyXG4gICAgICAgICAgbmFtZTogJ05lYXJieSBSZXN0YXVyYW50JyxcclxuICAgICAgICAgIGRpc3RhbmNlOiAyMDAsXHJcbiAgICAgICAgICBsYXRpdHVkZTogNDAuNzEyOCxcclxuICAgICAgICAgIGxvbmdpdHVkZTogLTc0LjAwNjAsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZDogJ25lYXJieTInLFxyXG4gICAgICAgICAgbmFtZTogJ0Fub3RoZXIgTmVhcmJ5IFBsYWNlJyxcclxuICAgICAgICAgIGRpc3RhbmNlOiA1MDAsXHJcbiAgICAgICAgICBsYXRpdHVkZTogNDAuNzEzMCxcclxuICAgICAgICAgIGxvbmdpdHVkZTogLTc0LjAwNjIsXHJcbiAgICAgICAgfSxcclxuICAgICAgXTtcclxuXHJcbiAgICAgIG1vY2tVc2VRdWVyeS5tb2NrUmV0dXJuVmFsdWUoe1xyXG4gICAgICAgIGRhdGE6IHsgbmVhcmJ5QnVzaW5lc3NlczogbW9ja05lYXJieUJ1c2luZXNzZXMgfSxcclxuICAgICAgICBsb2FkaW5nOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogdW5kZWZpbmVkLFxyXG4gICAgICAgIHJlZmV0Y2g6IGplc3QuZm4oKSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCBUZXN0Q29tcG9uZW50ID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gdXNlTmVhcmJ5QnVzaW5lc3Nlc1F1ZXJ5KHtcclxuICAgICAgICAgIGxhdGl0dWRlOiA0MC43MTI4LFxyXG4gICAgICAgICAgbG9uZ2l0dWRlOiAtNzQuMDA2MCxcclxuICAgICAgICAgIHJhZGl1czogMTAwMCxcclxuICAgICAgICAgIGNhdGVnb3J5OiAncmVzdGF1cmFudCcsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICB7ZGF0YT8ubmVhcmJ5QnVzaW5lc3Nlcy5tYXAoYnVzaW5lc3MgPT4gKFxyXG4gICAgICAgICAgICAgIDxkaXYga2V5PXtidXNpbmVzcy5pZH0gZGF0YS10ZXN0aWQ9e2BuZWFyYnktJHtidXNpbmVzcy5pZH1gfT5cclxuICAgICAgICAgICAgICAgIHtidXNpbmVzcy5uYW1lfSAtIHtidXNpbmVzcy5kaXN0YW5jZX1tXHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICkpfVxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGN1c3RvbVJlbmRlcig8VGVzdENvbXBvbmVudCAvPik7XHJcblxyXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcclxuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCduZWFyYnktbmVhcmJ5MScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xyXG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ25lYXJieS1uZWFyYnkyJykpLnRvQmVJblRoZURvY3VtZW50KCk7XHJcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ05lYXJieSBSZXN0YXVyYW50IC0gMjAwbScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xyXG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdBbm90aGVyIE5lYXJieSBQbGFjZSAtIDUwMG0nKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHNvcnQgYnVzaW5lc3NlcyBieSBkaXN0YW5jZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgdW5zb3J0ZWRCdXNpbmVzc2VzID0gW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIGlkOiAnZmFyJyxcclxuICAgICAgICAgIG5hbWU6ICdGYXIgQnVzaW5lc3MnLFxyXG4gICAgICAgICAgZGlzdGFuY2U6IDEwMDAsXHJcbiAgICAgICAgICBsYXRpdHVkZTogNDAuNzEyOCxcclxuICAgICAgICAgIGxvbmdpdHVkZTogLTc0LjAwNjAsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZDogJ2Nsb3NlJyxcclxuICAgICAgICAgIG5hbWU6ICdDbG9zZSBCdXNpbmVzcycsXHJcbiAgICAgICAgICBkaXN0YW5jZTogMTAwLFxyXG4gICAgICAgICAgbGF0aXR1ZGU6IDQwLjcxMjgsXHJcbiAgICAgICAgICBsb25naXR1ZGU6IC03NC4wMDYwLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIF07XHJcblxyXG4gICAgICBtb2NrVXNlUXVlcnkubW9ja1JldHVyblZhbHVlKHtcclxuICAgICAgICBkYXRhOiB7IG5lYXJieUJ1c2luZXNzZXM6IHVuc29ydGVkQnVzaW5lc3NlcyB9LFxyXG4gICAgICAgIGxvYWRpbmc6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiB1bmRlZmluZWQsXHJcbiAgICAgICAgcmVmZXRjaDogamVzdC5mbigpLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IFRlc3RDb21wb25lbnQgPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgeyBkYXRhIH0gPSB1c2VOZWFyYnlCdXNpbmVzc2VzUXVlcnkoe1xyXG4gICAgICAgICAgbGF0aXR1ZGU6IDQwLjcxMjgsXHJcbiAgICAgICAgICBsb25naXR1ZGU6IC03NC4wMDYwLFxyXG4gICAgICAgICAgcmFkaXVzOiAxMDAwLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAge2RhdGE/Lm5lYXJieUJ1c2luZXNzZXMubWFwKGJ1c2luZXNzID0+IChcclxuICAgICAgICAgICAgICA8ZGl2IGtleT17YnVzaW5lc3MuaWR9PlxyXG4gICAgICAgICAgICAgICAge2J1c2luZXNzLm5hbWV9XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICkpfVxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGN1c3RvbVJlbmRlcig8VGVzdENvbXBvbmVudCAvPik7XHJcblxyXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcclxuICAgICAgICBjb25zdCBidXNpbmVzc0VsZW1lbnRzID0gc2NyZWVuLmdldEFsbEJ5VGV4dCgvQnVzaW5lc3MvKTtcclxuICAgICAgICAvLyBTaG91bGQgYmUgc29ydGVkIGJ5IGRpc3RhbmNlIChjbG9zZSBmaXJzdClcclxuICAgICAgICBleHBlY3QoYnVzaW5lc3NFbGVtZW50c1swXSkudG9IYXZlVGV4dENvbnRlbnQoJ0Nsb3NlIEJ1c2luZXNzJyk7XHJcbiAgICAgICAgZXhwZWN0KGJ1c2luZXNzRWxlbWVudHNbMV0pLnRvSGF2ZVRleHRDb250ZW50KCdGYXIgQnVzaW5lc3MnKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0dyYXBoUUwgRXJyb3IgSGFuZGxpbmcnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBuZXR3b3JrIGVycm9ycyBncmFjZWZ1bGx5JywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBuZXR3b3JrRXJyb3IgPSBuZXcgRXJyb3IoJ05ldHdvcmsgZXJyb3InKTtcclxuICAgICAgbW9ja1VzZVF1ZXJ5Lm1vY2tSZXR1cm5WYWx1ZSh7XHJcbiAgICAgICAgZGF0YTogdW5kZWZpbmVkLFxyXG4gICAgICAgIGxvYWRpbmc6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiBuZXR3b3JrRXJyb3IsXHJcbiAgICAgICAgcmVmZXRjaDogamVzdC5mbigpLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IFRlc3RDb21wb25lbnQgPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgeyBlcnJvciB9ID0gdXNlQnVzaW5lc3Nlc1F1ZXJ5KHsgY2F0ZWdvcnk6ICdyZXN0YXVyYW50JyB9KTtcclxuICAgICAgICByZXR1cm4gPGRpdj57ZXJyb3IgPyAnTmV0d29yayBFcnJvciBPY2N1cnJlZCcgOiAnTm8gRXJyb3InfTwvZGl2PjtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGN1c3RvbVJlbmRlcig8VGVzdENvbXBvbmVudCAvPik7XHJcblxyXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnTmV0d29yayBFcnJvciBPY2N1cnJlZCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgR3JhcGhRTCB2YWxpZGF0aW9uIGVycm9ycycsICgpID0+IHtcclxuICAgICAgY29uc3QgdmFsaWRhdGlvbkVycm9yID0ge1xyXG4gICAgICAgIG1lc3NhZ2U6ICdWYWxpZGF0aW9uIGVycm9yJyxcclxuICAgICAgICBncmFwaFFMRXJyb3JzOiBbXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIGNhdGVnb3J5IHBhcmFtZXRlcicsXHJcbiAgICAgICAgICAgIGV4dGVuc2lvbnM6IHsgY29kZTogJ1ZBTElEQVRJT05fRVJST1InIH0sXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIF0sXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBtb2NrVXNlUXVlcnkubW9ja1JldHVyblZhbHVlKHtcclxuICAgICAgICBkYXRhOiB1bmRlZmluZWQsXHJcbiAgICAgICAgbG9hZGluZzogZmFsc2UsXHJcbiAgICAgICAgZXJyb3I6IHZhbGlkYXRpb25FcnJvcixcclxuICAgICAgICByZWZldGNoOiBqZXN0LmZuKCksXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgVGVzdENvbXBvbmVudCA9ICgpID0+IHtcclxuICAgICAgICBjb25zdCB7IGVycm9yIH0gPSB1c2VCdXNpbmVzc2VzUXVlcnkoeyBjYXRlZ29yeTogJ2ludmFsaWQnIH0pO1xyXG4gICAgICAgIHJldHVybiA8ZGl2PntlcnJvciA/ICdWYWxpZGF0aW9uIEVycm9yJyA6ICdObyBFcnJvcid9PC9kaXY+O1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgY3VzdG9tUmVuZGVyKDxUZXN0Q29tcG9uZW50IC8+KTtcclxuXHJcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdWYWxpZGF0aW9uIEVycm9yJykpLnRvQmVJblRoZURvY3VtZW50KCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0dyYXBoUUwgUGVyZm9ybWFuY2UnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGNhY2hlIHF1ZXJ5IHJlc3VsdHMgYXBwcm9wcmlhdGVseScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgbW9ja0RhdGEgPSB7IGJ1c2luZXNzZXM6IFt7IGlkOiAnMScsIG5hbWU6ICdDYWNoZWQgQnVzaW5lc3MnIH1dIH07XHJcblxyXG4gICAgICBtb2NrVXNlUXVlcnkubW9ja1JldHVyblZhbHVlKHtcclxuICAgICAgICBkYXRhOiBtb2NrRGF0YSxcclxuICAgICAgICBsb2FkaW5nOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogdW5kZWZpbmVkLFxyXG4gICAgICAgIHJlZmV0Y2g6IGplc3QuZm4oKSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCBUZXN0Q29tcG9uZW50ID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gdXNlQnVzaW5lc3Nlc1F1ZXJ5KHsgY2F0ZWdvcnk6ICdyZXN0YXVyYW50JyB9KTtcclxuICAgICAgICByZXR1cm4gPGRpdj57ZGF0YT8uYnVzaW5lc3Nlc1swXT8ubmFtZX08L2Rpdj47XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCB7IHJlcmVuZGVyIH0gPSBjdXN0b21SZW5kZXIoPFRlc3RDb21wb25lbnQgLz4pO1xyXG5cclxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XHJcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0NhY2hlZCBCdXNpbmVzcycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIFJlLXJlbmRlciBzaG91bGQgdXNlIGNhY2hlZCBkYXRhXHJcbiAgICAgIHJlcmVuZGVyKDxUZXN0Q29tcG9uZW50IC8+KTtcclxuXHJcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdDYWNoZWQgQnVzaW5lc3MnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcclxuICAgICAgZXhwZWN0KG1vY2tVc2VRdWVyeSkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDEpOyAvLyBTaG91bGQgbm90IHJlZmV0Y2hcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGNvbmN1cnJlbnQgcXVlcmllcyBlZmZpY2llbnRseScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgbW9ja0RhdGEgPSB7IGJ1c2luZXNzZXM6IFt7IGlkOiAnMScsIG5hbWU6ICdDb25jdXJyZW50IEJ1c2luZXNzJyB9XSB9O1xyXG5cclxuICAgICAgbW9ja1VzZVF1ZXJ5Lm1vY2tSZXR1cm5WYWx1ZSh7XHJcbiAgICAgICAgZGF0YTogbW9ja0RhdGEsXHJcbiAgICAgICAgbG9hZGluZzogZmFsc2UsXHJcbiAgICAgICAgZXJyb3I6IHVuZGVmaW5lZCxcclxuICAgICAgICByZWZldGNoOiBqZXN0LmZuKCksXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgVGVzdENvbXBvbmVudCA9ICgpID0+IHtcclxuICAgICAgICBjb25zdCBxdWVyeTEgPSB1c2VCdXNpbmVzc2VzUXVlcnkoeyBjYXRlZ29yeTogJ3Jlc3RhdXJhbnQnIH0pO1xyXG4gICAgICAgIGNvbnN0IHF1ZXJ5MiA9IHVzZUJ1c2luZXNzZXNRdWVyeSh7IGNhdGVnb3J5OiAncmVzdGF1cmFudCcgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICB7cXVlcnkxLmRhdGE/LmJ1c2luZXNzZXNbMF0/Lm5hbWV9XHJcbiAgICAgICAgICAgIHtxdWVyeTIuZGF0YT8uYnVzaW5lc3Nlc1swXT8ubmFtZX1cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjdXN0b21SZW5kZXIoPFRlc3RDb21wb25lbnQgLz4pO1xyXG5cclxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XHJcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0NvbmN1cnJlbnQgQnVzaW5lc3NDb25jdXJyZW50IEJ1c2luZXNzJykpLnRvQmVJblRoZURvY3VtZW50KCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gU2hvdWxkIGRlZHVwbGljYXRlIHRoZSBxdWVyeVxyXG4gICAgICBleHBlY3QobW9ja1VzZVF1ZXJ5KS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufSk7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFTQTtBQUNBQSxXQUFBLEdBQUtDLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxPQUFPO0VBQ2pDQyxRQUFRLEVBQUVDLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUM7RUFDbkJDLFdBQVcsRUFBRUYsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQztFQUN0QkUsR0FBRyxFQUFFSCxJQUFJLENBQUNDLEVBQUUsQ0FBRUcsUUFBOEIsSUFBS0EsUUFB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