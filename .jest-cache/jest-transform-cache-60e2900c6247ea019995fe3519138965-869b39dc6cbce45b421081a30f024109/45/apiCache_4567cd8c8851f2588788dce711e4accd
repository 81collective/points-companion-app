c410532e2b9cb3d56d76c9e9d7675af3
"use strict";

exports.__esModule = true;
exports.warmupCache = exports.getCacheMetrics = exports.apiCache = exports.advancedApiCache = void 0;
// Advanced Redis-like in-memory cache with LRU eviction, persistence, and advanced features

class AdvancedAPICache {
  cache = new Map();
  pendingRequests = new Map();
  stats = {
    hits: 0,
    misses: 0,
    evictions: 0,
    sets: 0,
    deletes: 0,
    size: 0,
    itemCount: 0
  };
  config = {
    maxSize: 50 * 1024 * 1024,
    // 50MB default
    defaultTTL: 5 * 60 * 1000,
    // 5 minutes
    enablePersistence: true,
    persistenceKey: 'api-cache-persistence',
    enableCompression: false,
    lruEnabled: true
  };
  constructor(config) {
    if (config) {
      this.config = {
        ...this.config,
        ...config
      };
    }

    // Load persisted cache on initialization
    if (this.config.enablePersistence && typeof window !== 'undefined') {
      this.loadPersistedCache();
    }

    // Set up periodic cleanup and persistence
    if (typeof global !== 'undefined') {
      setInterval(() => {
        this.cleanup();
        if (this.config.enablePersistence) {
          this.persistCache();
        }
      }, 60000); // Every minute
    }
  }

  // Generate cache key from request parameters with advanced hashing
  generateKey(params, prefix = 'api') {
    const sortedParams = Object.keys(params).sort().reduce((result, key) => {
      result[key] = params[key];
      return result;
    }, {});
    const paramString = JSON.stringify(sortedParams);
    return `${prefix}:${this.simpleHash(paramString)}`;
  }

  // Simple hash function for cache keys
  simpleHash(str) {
    let hash = 0;
    for (let i = 0; i < str.length; i++) {
      const char = str.charCodeAt(i);
      hash = (hash << 5) - hash + char;
      hash = hash & hash; // Convert to 32-bit integer
    }
    return Math.abs(hash).toString(36);
  }

  // Estimate size of data in bytes
  estimateSize(data) {
    const str = JSON.stringify(data);
    return str ? str.length * 2 : 0; // Rough estimate: 2 bytes per character
  }

  // Get cached data with LRU tracking
  get(key) {
    const entry = this.cache.get(key);
    if (!entry) {
      this.stats.misses++;
      return null;
    }
    const now = Date.now();
    if (now - entry.timestamp > entry.ttl) {
      this.cache.delete(key);
      this.stats.size -= entry.size;
      this.stats.itemCount--;
      this.stats.misses++;
      return null;
    }

    // Update LRU tracking
    entry.accessCount++;
    entry.lastAccessed = now;
    this.stats.hits++;
    return entry.data;
  }

  // Set cache entry with advanced features
  set(key, data, options = {}) {
    const ttl = options.ttl || this.config.defaultTTL;
    const size = this.estimateSize(data);
    const now = Date.now();

    // Check if we need to evict entries to make room
    if (this.stats.size + size > this.config.maxSize) {
      const requiredSpace = this.stats.size + size - this.config.maxSize;
      this.evictLRU(requiredSpace);
    }
    const entry = {
      data,
      timestamp: now,
      ttl,
      accessCount: 0,
      lastAccessed: now,
      size,
      tags: options.tags
    };

    // Remove old entry if it exists
    const oldEntry = this.cache.get(key);
    if (oldEntry) {
      this.stats.size -= oldEntry.size;
      this.stats.itemCount--;
    }
    this.cache.set(key, entry);
    this.stats.size += size;
    this.stats.itemCount++;
    this.stats.sets++;
  }

  // LRU eviction
  evictLRU(requiredSpace) {
    if (!this.config.lruEnabled) return;
    const entries = Array.from(this.cache.entries()).sort(([, a], [, b]) => {
      // Sort by access count, then by last accessed time
      if (a.accessCount !== b.accessCount) {
        return a.accessCount - b.accessCount;
      }
      return a.lastAccessed - b.lastAccessed;
    });
    let freedSpace = 0;
    for (const [key, entry] of entries) {
      if (freedSpace >= requiredSpace) break;
      this.cache.delete(key);
      this.stats.size -= entry.size;
      this.stats.itemCount--;
      this.stats.evictions++;
      freedSpace += entry.size;
    }
  }

  // Delete cache entry
  delete(key) {
    const entry = this.cache.get(key);
    if (entry) {
      this.cache.delete(key);
      this.stats.size -= entry.size;
      this.stats.itemCount--;
      this.stats.deletes++;
      return true;
    }
    return false;
  }

  // Clear cache by tags
  clearByTags(tags) {
    let cleared = 0;
    for (const [key, entry] of this.cache.entries()) {
      if (entry.tags && entry.tags.some(tag => tags.includes(tag))) {
        this.cache.delete(key);
        this.stats.size -= entry.size;
        this.stats.itemCount--;
        this.stats.deletes++;
        cleared++;
      }
    }
    return cleared;
  }

  // Clear all cache
  clear() {
    this.cache.clear();
    this.stats.size = 0;
    this.stats.itemCount = 0;
    this.stats.deletes += this.stats.itemCount;
  }

  // Handle request deduplication with enhanced error handling
  async dedupe(key, requestFn, options = {}) {
    // Check cache first if enabled
    if (options.useCache !== false) {
      const cached = this.get(key);
      if (cached !== null) {
        return cached;
      }
    }

    // Check if request is already pending
    const pending = this.pendingRequests.get(key);
    if (pending) {
      return pending;
    }

    // Execute request and cache the promise
    const promise = requestFn().then(result => {
      // Cache successful results
      if (options.useCache !== false) {
        this.set(key, result, {
          ttl: options.ttl,
          tags: options.tags
        });
      }
      return result;
    }).finally(() => {
      this.pendingRequests.delete(key);
    });
    this.pendingRequests.set(key, promise);
    return promise;
  }

  // Get cache statistics
  getStats() {
    return {
      ...this.stats
    };
  }

  // Get cache hit rate
  getHitRate() {
    const total = this.stats.hits + this.stats.misses;
    return total > 0 ? this.stats.hits / total : 0;
  }

  // Cleanup expired entries
  cleanup() {
    const now = Date.now();
    for (const [key, entry] of this.cache.entries()) {
      if (now - entry.timestamp > entry.ttl) {
        this.cache.delete(key);
        this.stats.size -= entry.size;
        this.stats.itemCount--;
      }
    }
  }

  // Persist cache to localStorage
  persistCache() {
    if (typeof window === 'undefined' || !window.localStorage) return;
    try {
      const persistableData = Array.from(this.cache.entries()).filter(([, entry]) => {
        // Only persist entries that haven't expired and aren't too large
        const now = Date.now();
        return now - entry.timestamp < entry.ttl && entry.size < 1024 * 1024; // < 1MB
      }).map(([key, entry]) => [key, {
        data: entry.data,
        timestamp: entry.timestamp,
        ttl: entry.ttl,
        accessCount: entry.accessCount,
        lastAccessed: entry.lastAccessed,
        size: entry.size,
        tags: entry.tags
      }]);
      localStorage.setItem(this.config.persistenceKey, JSON.stringify({
        data: persistableData,
        timestamp: Date.now()
      }));
    } catch (error) {
      console.warn('Failed to persist cache:', error);
    }
  }

  // Load persisted cache from localStorage
  loadPersistedCache() {
    if (typeof window === 'undefined' || !window.localStorage) return;
    try {
      const persisted = localStorage.getItem(this.config.persistenceKey);
      if (!persisted) return;
      const {
        data,
        timestamp
      } = JSON.parse(persisted);
      const now = Date.now();

      // Only load if persisted within last 24 hours
      if (now - timestamp > 24 * 60 * 60 * 1000) {
        localStorage.removeItem(this.config.persistenceKey);
        return;
      }
      for (const [key, entry] of data) {
        // Check if entry is still valid
        if (now - entry.timestamp < entry.ttl) {
          this.cache.set(key, entry);
          this.stats.size += entry.size;
          this.stats.itemCount++;
        }
      }
      console.log(`Loaded ${this.stats.itemCount} persisted cache entries`);
    } catch (error) {
      console.warn('Failed to load persisted cache:', error);
      localStorage.removeItem(this.config.persistenceKey);
    }
  }

  // Warm up cache with frequently accessed data
  async warmup(keys) {
    const warmupPromises = keys.map(async key => {
      // This would typically fetch from a fast source or pre-computed data
      // For now, just ensure the key exists in cache
      return this.cache.has(key);
    });
    await Promise.all(warmupPromises);
  }
}

// Global advanced cache instance with optimized settings
const advancedApiCache = exports.advancedApiCache = new AdvancedAPICache({
  maxSize: 100 * 1024 * 1024,
  // 100MB for better performance
  defaultTTL: 10 * 60 * 1000,
  // 10 minutes for better cache hit rates
  enablePersistence: true,
  persistenceKey: 'points-companion-cache-v2',
  enableCompression: false,
  // Can be enabled later with compression library
  lruEnabled: true
});

// Legacy cache instance for backward compatibility
const apiCache = exports.apiCache = advancedApiCache;

// Cache warming utility
const warmupCache = async frequentlyUsedKeys => {
  await advancedApiCache.warmup(frequentlyUsedKeys);
};

// Cache monitoring utility
exports.warmupCache = warmupCache;
const getCacheMetrics = () => {
  const stats = advancedApiCache.getStats();
  const hitRate = advancedApiCache.getHitRate();
  return {
    ...stats,
    hitRate: `${(hitRate * 100).toFixed(2)}%`,
    sizeFormatted: `${(stats.size / 1024 / 1024).toFixed(2)}MB`,
    efficiency: hitRate > 0.8 ? 'Excellent' : hitRate > 0.6 ? 'Good' : 'Needs Optimization'
  };
};
exports.getCacheMetrics = getCacheMetrics;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJBZHZhbmNlZEFQSUNhY2hlIiwiY2FjaGUiLCJNYXAiLCJwZW5kaW5nUmVxdWVzdHMiLCJzdGF0cyIsImhpdHMiLCJtaXNzZXMiLCJldmljdGlvbnMiLCJzZXRzIiwiZGVsZXRlcyIsInNpemUiLCJpdGVtQ291bnQiLCJjb25maWciLCJtYXhTaXplIiwiZGVmYXVsdFRUTCIsImVuYWJsZVBlcnNpc3RlbmNlIiwicGVyc2lzdGVuY2VLZXkiLCJlbmFibGVDb21wcmVzc2lvbiIsImxydUVuYWJsZWQiLCJjb25zdHJ1Y3RvciIsIndpbmRvdyIsImxvYWRQZXJzaXN0ZWRDYWNoZSIsImdsb2JhbCIsInNldEludGVydmFsIiwiY2xlYW51cCIsInBlcnNpc3RDYWNoZSIsImdlbmVyYXRlS2V5IiwicGFyYW1zIiwicHJlZml4Iiwic29ydGVkUGFyYW1zIiwiT2JqZWN0Iiwia2V5cyIsInNvcnQiLCJyZWR1Y2UiLCJyZXN1bHQiLCJrZXkiLCJwYXJhbVN0cmluZyIsIkpTT04iLCJzdHJpbmdpZnkiLCJzaW1wbGVIYXNoIiwic3RyIiwiaGFzaCIsImkiLCJsZW5ndGgiLCJjaGFyIiwiY2hhckNvZGVBdCIsIk1hdGgiLCJhYnMiLCJ0b1N0cmluZyIsImVzdGltYXRlU2l6ZSIsImRhdGEiLCJnZXQiLCJlbnRyeSIsIm5vdyIsIkRhdGUiLCJ0aW1lc3RhbXAiLCJ0dGwiLCJkZWxldGUiLCJhY2Nlc3NDb3VudCIsImxhc3RBY2Nlc3NlZCIsInNldCIsIm9wdGlvbnMiLCJyZXF1aXJlZFNwYWNlIiwiZXZpY3RMUlUiLCJ0YWdzIiwib2xkRW50cnkiLCJlbnRyaWVzIiwiQXJyYXkiLCJmcm9tIiwiYSIsImIiLCJmcmVlZFNwYWNlIiwiY2xlYXJCeVRhZ3MiLCJjbGVhcmVkIiwic29tZSIsInRhZyIsImluY2x1ZGVzIiwiY2xlYXIiLCJkZWR1cGUiLCJyZXF1ZXN0Rm4iLCJ1c2VDYWNoZSIsImNhY2hlZCIsInBlbmRpbmciLCJwcm9taXNlIiwidGhlbiIsImZpbmFsbHkiLCJnZXRTdGF0cyIsImdldEhpdFJhdGUiLCJ0b3RhbCIsImxvY2FsU3RvcmFnZSIsInBlcnNpc3RhYmxlRGF0YSIsImZpbHRlciIsIm1hcCIsInNldEl0ZW0iLCJlcnJvciIsImNvbnNvbGUiLCJ3YXJuIiwicGVyc2lzdGVkIiwiZ2V0SXRlbSIsInBhcnNlIiwicmVtb3ZlSXRlbSIsImxvZyIsIndhcm11cCIsIndhcm11cFByb21pc2VzIiwiaGFzIiwiUHJvbWlzZSIsImFsbCIsImFkdmFuY2VkQXBpQ2FjaGUiLCJleHBvcnRzIiwiYXBpQ2FjaGUiLCJ3YXJtdXBDYWNoZSIsImZyZXF1ZW50bHlVc2VkS2V5cyIsImdldENhY2hlTWV0cmljcyIsImhpdFJhdGUiLCJ0b0ZpeGVkIiwic2l6ZUZvcm1hdHRlZCIsImVmZmljaWVuY3kiXSwic291cmNlcyI6WyJhcGlDYWNoZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBBZHZhbmNlZCBSZWRpcy1saWtlIGluLW1lbW9yeSBjYWNoZSB3aXRoIExSVSBldmljdGlvbiwgcGVyc2lzdGVuY2UsIGFuZCBhZHZhbmNlZCBmZWF0dXJlc1xyXG5pbnRlcmZhY2UgQ2FjaGVFbnRyeTxUID0gdW5rbm93bj4ge1xyXG4gIGRhdGE6IFQ7XHJcbiAgdGltZXN0YW1wOiBudW1iZXI7XHJcbiAgdHRsOiBudW1iZXI7XHJcbiAgYWNjZXNzQ291bnQ6IG51bWJlcjtcclxuICBsYXN0QWNjZXNzZWQ6IG51bWJlcjtcclxuICBzaXplOiBudW1iZXI7IC8vIEVzdGltYXRlZCBzaXplIGluIGJ5dGVzXHJcbiAgdGFncz86IHN0cmluZ1tdOyAvLyBGb3IgY2FjaGUgaW52YWxpZGF0aW9uIGJ5IHRhZ3NcclxufVxyXG5cclxuaW50ZXJmYWNlIENhY2hlU3RhdHMge1xyXG4gIGhpdHM6IG51bWJlcjtcclxuICBtaXNzZXM6IG51bWJlcjtcclxuICBldmljdGlvbnM6IG51bWJlcjtcclxuICBzZXRzOiBudW1iZXI7XHJcbiAgZGVsZXRlczogbnVtYmVyO1xyXG4gIHNpemU6IG51bWJlcjsgLy8gVG90YWwgY2FjaGUgc2l6ZSBpbiBieXRlc1xyXG4gIGl0ZW1Db3VudDogbnVtYmVyO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgQ2FjaGVDb25maWcge1xyXG4gIG1heFNpemU6IG51bWJlcjsgLy8gTWF4aW11bSBjYWNoZSBzaXplIGluIGJ5dGVzXHJcbiAgZGVmYXVsdFRUTDogbnVtYmVyOyAvLyBEZWZhdWx0IFRUTCBpbiBtaWxsaXNlY29uZHNcclxuICBlbmFibGVQZXJzaXN0ZW5jZTogYm9vbGVhbjtcclxuICBwZXJzaXN0ZW5jZUtleTogc3RyaW5nO1xyXG4gIGVuYWJsZUNvbXByZXNzaW9uOiBib29sZWFuO1xyXG4gIGxydUVuYWJsZWQ6IGJvb2xlYW47XHJcbn1cclxuXHJcbmNsYXNzIEFkdmFuY2VkQVBJQ2FjaGUge1xyXG4gIHByaXZhdGUgY2FjaGUgPSBuZXcgTWFwPHN0cmluZywgQ2FjaGVFbnRyeT4oKTtcclxuICBwcml2YXRlIHBlbmRpbmdSZXF1ZXN0cyA9IG5ldyBNYXA8c3RyaW5nLCBQcm9taXNlPHVua25vd24+PigpO1xyXG4gIHByaXZhdGUgc3RhdHM6IENhY2hlU3RhdHMgPSB7XHJcbiAgICBoaXRzOiAwLFxyXG4gICAgbWlzc2VzOiAwLFxyXG4gICAgZXZpY3Rpb25zOiAwLFxyXG4gICAgc2V0czogMCxcclxuICAgIGRlbGV0ZXM6IDAsXHJcbiAgICBzaXplOiAwLFxyXG4gICAgaXRlbUNvdW50OiAwXHJcbiAgfTtcclxuXHJcbiAgcHJpdmF0ZSBjb25maWc6IENhY2hlQ29uZmlnID0ge1xyXG4gICAgbWF4U2l6ZTogNTAgKiAxMDI0ICogMTAyNCwgLy8gNTBNQiBkZWZhdWx0XHJcbiAgICBkZWZhdWx0VFRMOiA1ICogNjAgKiAxMDAwLCAvLyA1IG1pbnV0ZXNcclxuICAgIGVuYWJsZVBlcnNpc3RlbmNlOiB0cnVlLFxyXG4gICAgcGVyc2lzdGVuY2VLZXk6ICdhcGktY2FjaGUtcGVyc2lzdGVuY2UnLFxyXG4gICAgZW5hYmxlQ29tcHJlc3Npb246IGZhbHNlLFxyXG4gICAgbHJ1RW5hYmxlZDogdHJ1ZVxyXG4gIH07XHJcblxyXG4gIGNvbnN0cnVjdG9yKGNvbmZpZz86IFBhcnRpYWw8Q2FjaGVDb25maWc+KSB7XHJcbiAgICBpZiAoY29uZmlnKSB7XHJcbiAgICAgIHRoaXMuY29uZmlnID0geyAuLi50aGlzLmNvbmZpZywgLi4uY29uZmlnIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTG9hZCBwZXJzaXN0ZWQgY2FjaGUgb24gaW5pdGlhbGl6YXRpb25cclxuICAgIGlmICh0aGlzLmNvbmZpZy5lbmFibGVQZXJzaXN0ZW5jZSAmJiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICB0aGlzLmxvYWRQZXJzaXN0ZWRDYWNoZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFNldCB1cCBwZXJpb2RpYyBjbGVhbnVwIGFuZCBwZXJzaXN0ZW5jZVxyXG4gICAgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgICB0aGlzLmNsZWFudXAoKTtcclxuICAgICAgICBpZiAodGhpcy5jb25maWcuZW5hYmxlUGVyc2lzdGVuY2UpIHtcclxuICAgICAgICAgIHRoaXMucGVyc2lzdENhY2hlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LCA2MDAwMCk7IC8vIEV2ZXJ5IG1pbnV0ZVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gR2VuZXJhdGUgY2FjaGUga2V5IGZyb20gcmVxdWVzdCBwYXJhbWV0ZXJzIHdpdGggYWR2YW5jZWQgaGFzaGluZ1xyXG4gIGdlbmVyYXRlS2V5KHBhcmFtczogUmVjb3JkPHN0cmluZywgdW5rbm93bj4sIHByZWZpeCA9ICdhcGknKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IHNvcnRlZFBhcmFtcyA9IE9iamVjdC5rZXlzKHBhcmFtcylcclxuICAgICAgLnNvcnQoKVxyXG4gICAgICAucmVkdWNlKChyZXN1bHQsIGtleSkgPT4ge1xyXG4gICAgICAgIHJlc3VsdFtrZXldID0gcGFyYW1zW2tleV07XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgfSwge30gYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4pO1xyXG5cclxuICAgIGNvbnN0IHBhcmFtU3RyaW5nID0gSlNPTi5zdHJpbmdpZnkoc29ydGVkUGFyYW1zKTtcclxuICAgIHJldHVybiBgJHtwcmVmaXh9OiR7dGhpcy5zaW1wbGVIYXNoKHBhcmFtU3RyaW5nKX1gO1xyXG4gIH1cclxuXHJcbiAgLy8gU2ltcGxlIGhhc2ggZnVuY3Rpb24gZm9yIGNhY2hlIGtleXNcclxuICBwcml2YXRlIHNpbXBsZUhhc2goc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgbGV0IGhhc2ggPSAwO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgY29uc3QgY2hhciA9IHN0ci5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICBoYXNoID0gKChoYXNoIDw8IDUpIC0gaGFzaCkgKyBjaGFyO1xyXG4gICAgICBoYXNoID0gaGFzaCAmIGhhc2g7IC8vIENvbnZlcnQgdG8gMzItYml0IGludGVnZXJcclxuICAgIH1cclxuICAgIHJldHVybiBNYXRoLmFicyhoYXNoKS50b1N0cmluZygzNik7XHJcbiAgfVxyXG5cclxuICAvLyBFc3RpbWF0ZSBzaXplIG9mIGRhdGEgaW4gYnl0ZXNcclxuICBwcml2YXRlIGVzdGltYXRlU2l6ZShkYXRhOiB1bmtub3duKTogbnVtYmVyIHtcclxuICAgIGNvbnN0IHN0ciA9IEpTT04uc3RyaW5naWZ5KGRhdGEpO1xyXG4gICAgcmV0dXJuIHN0ciA/IHN0ci5sZW5ndGggKiAyIDogMDsgLy8gUm91Z2ggZXN0aW1hdGU6IDIgYnl0ZXMgcGVyIGNoYXJhY3RlclxyXG4gIH1cclxuXHJcbiAgLy8gR2V0IGNhY2hlZCBkYXRhIHdpdGggTFJVIHRyYWNraW5nXHJcbiAgZ2V0PFQgPSB1bmtub3duPihrZXk6IHN0cmluZyk6IFQgfCBudWxsIHtcclxuICAgIGNvbnN0IGVudHJ5ID0gdGhpcy5jYWNoZS5nZXQoa2V5KTtcclxuICAgIGlmICghZW50cnkpIHtcclxuICAgICAgdGhpcy5zdGF0cy5taXNzZXMrKztcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgIGlmIChub3cgLSBlbnRyeS50aW1lc3RhbXAgPiBlbnRyeS50dGwpIHtcclxuICAgICAgdGhpcy5jYWNoZS5kZWxldGUoa2V5KTtcclxuICAgICAgdGhpcy5zdGF0cy5zaXplIC09IGVudHJ5LnNpemU7XHJcbiAgICAgIHRoaXMuc3RhdHMuaXRlbUNvdW50LS07XHJcbiAgICAgIHRoaXMuc3RhdHMubWlzc2VzKys7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFVwZGF0ZSBMUlUgdHJhY2tpbmdcclxuICAgIGVudHJ5LmFjY2Vzc0NvdW50Kys7XHJcbiAgICBlbnRyeS5sYXN0QWNjZXNzZWQgPSBub3c7XHJcbiAgICB0aGlzLnN0YXRzLmhpdHMrKztcclxuXHJcbiAgICByZXR1cm4gZW50cnkuZGF0YSBhcyBUO1xyXG4gIH1cclxuXHJcbiAgLy8gU2V0IGNhY2hlIGVudHJ5IHdpdGggYWR2YW5jZWQgZmVhdHVyZXNcclxuICBzZXQ8VCA9IHVua25vd24+KFxyXG4gICAga2V5OiBzdHJpbmcsXHJcbiAgICBkYXRhOiBULFxyXG4gICAgb3B0aW9uczoge1xyXG4gICAgICB0dGw/OiBudW1iZXI7XHJcbiAgICAgIHRhZ3M/OiBzdHJpbmdbXTtcclxuICAgICAgY29tcHJlc3M/OiBib29sZWFuO1xyXG4gICAgfSA9IHt9XHJcbiAgKTogdm9pZCB7XHJcbiAgICBjb25zdCB0dGwgPSBvcHRpb25zLnR0bCB8fCB0aGlzLmNvbmZpZy5kZWZhdWx0VFRMO1xyXG4gICAgY29uc3Qgc2l6ZSA9IHRoaXMuZXN0aW1hdGVTaXplKGRhdGEpO1xyXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuXHJcbiAgICAvLyBDaGVjayBpZiB3ZSBuZWVkIHRvIGV2aWN0IGVudHJpZXMgdG8gbWFrZSByb29tXHJcbiAgICBpZiAodGhpcy5zdGF0cy5zaXplICsgc2l6ZSA+IHRoaXMuY29uZmlnLm1heFNpemUpIHtcclxuICAgICAgY29uc3QgcmVxdWlyZWRTcGFjZSA9IHRoaXMuc3RhdHMuc2l6ZSArIHNpemUgLSB0aGlzLmNvbmZpZy5tYXhTaXplO1xyXG4gICAgICB0aGlzLmV2aWN0TFJVKHJlcXVpcmVkU3BhY2UpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGVudHJ5OiBDYWNoZUVudHJ5PFQ+ID0ge1xyXG4gICAgICBkYXRhLFxyXG4gICAgICB0aW1lc3RhbXA6IG5vdyxcclxuICAgICAgdHRsLFxyXG4gICAgICBhY2Nlc3NDb3VudDogMCxcclxuICAgICAgbGFzdEFjY2Vzc2VkOiBub3csXHJcbiAgICAgIHNpemUsXHJcbiAgICAgIHRhZ3M6IG9wdGlvbnMudGFnc1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBSZW1vdmUgb2xkIGVudHJ5IGlmIGl0IGV4aXN0c1xyXG4gICAgY29uc3Qgb2xkRW50cnkgPSB0aGlzLmNhY2hlLmdldChrZXkpO1xyXG4gICAgaWYgKG9sZEVudHJ5KSB7XHJcbiAgICAgIHRoaXMuc3RhdHMuc2l6ZSAtPSBvbGRFbnRyeS5zaXplO1xyXG4gICAgICB0aGlzLnN0YXRzLml0ZW1Db3VudC0tO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuY2FjaGUuc2V0KGtleSwgZW50cnkpO1xyXG4gICAgdGhpcy5zdGF0cy5zaXplICs9IHNpemU7XHJcbiAgICB0aGlzLnN0YXRzLml0ZW1Db3VudCsrO1xyXG4gICAgdGhpcy5zdGF0cy5zZXRzKys7XHJcbiAgfVxyXG5cclxuICAvLyBMUlUgZXZpY3Rpb25cclxuICBwcml2YXRlIGV2aWN0TFJVKHJlcXVpcmVkU3BhY2U6IG51bWJlcik6IHZvaWQge1xyXG4gICAgaWYgKCF0aGlzLmNvbmZpZy5scnVFbmFibGVkKSByZXR1cm47XHJcblxyXG4gICAgY29uc3QgZW50cmllcyA9IEFycmF5LmZyb20odGhpcy5jYWNoZS5lbnRyaWVzKCkpXHJcbiAgICAgIC5zb3J0KChbLCBhXSwgWywgYl0pID0+IHtcclxuICAgICAgICAvLyBTb3J0IGJ5IGFjY2VzcyBjb3VudCwgdGhlbiBieSBsYXN0IGFjY2Vzc2VkIHRpbWVcclxuICAgICAgICBpZiAoYS5hY2Nlc3NDb3VudCAhPT0gYi5hY2Nlc3NDb3VudCkge1xyXG4gICAgICAgICAgcmV0dXJuIGEuYWNjZXNzQ291bnQgLSBiLmFjY2Vzc0NvdW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYS5sYXN0QWNjZXNzZWQgLSBiLmxhc3RBY2Nlc3NlZDtcclxuICAgICAgfSk7XHJcblxyXG4gICAgbGV0IGZyZWVkU3BhY2UgPSAwO1xyXG4gICAgZm9yIChjb25zdCBba2V5LCBlbnRyeV0gb2YgZW50cmllcykge1xyXG4gICAgICBpZiAoZnJlZWRTcGFjZSA+PSByZXF1aXJlZFNwYWNlKSBicmVhaztcclxuXHJcbiAgICAgIHRoaXMuY2FjaGUuZGVsZXRlKGtleSk7XHJcbiAgICAgIHRoaXMuc3RhdHMuc2l6ZSAtPSBlbnRyeS5zaXplO1xyXG4gICAgICB0aGlzLnN0YXRzLml0ZW1Db3VudC0tO1xyXG4gICAgICB0aGlzLnN0YXRzLmV2aWN0aW9ucysrO1xyXG4gICAgICBmcmVlZFNwYWNlICs9IGVudHJ5LnNpemU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBEZWxldGUgY2FjaGUgZW50cnlcclxuICBkZWxldGUoa2V5OiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgIGNvbnN0IGVudHJ5ID0gdGhpcy5jYWNoZS5nZXQoa2V5KTtcclxuICAgIGlmIChlbnRyeSkge1xyXG4gICAgICB0aGlzLmNhY2hlLmRlbGV0ZShrZXkpO1xyXG4gICAgICB0aGlzLnN0YXRzLnNpemUgLT0gZW50cnkuc2l6ZTtcclxuICAgICAgdGhpcy5zdGF0cy5pdGVtQ291bnQtLTtcclxuICAgICAgdGhpcy5zdGF0cy5kZWxldGVzKys7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgLy8gQ2xlYXIgY2FjaGUgYnkgdGFnc1xyXG4gIGNsZWFyQnlUYWdzKHRhZ3M6IHN0cmluZ1tdKTogbnVtYmVyIHtcclxuICAgIGxldCBjbGVhcmVkID0gMDtcclxuICAgIGZvciAoY29uc3QgW2tleSwgZW50cnldIG9mIHRoaXMuY2FjaGUuZW50cmllcygpKSB7XHJcbiAgICAgIGlmIChlbnRyeS50YWdzICYmIGVudHJ5LnRhZ3Muc29tZSh0YWcgPT4gdGFncy5pbmNsdWRlcyh0YWcpKSkge1xyXG4gICAgICAgIHRoaXMuY2FjaGUuZGVsZXRlKGtleSk7XHJcbiAgICAgICAgdGhpcy5zdGF0cy5zaXplIC09IGVudHJ5LnNpemU7XHJcbiAgICAgICAgdGhpcy5zdGF0cy5pdGVtQ291bnQtLTtcclxuICAgICAgICB0aGlzLnN0YXRzLmRlbGV0ZXMrKztcclxuICAgICAgICBjbGVhcmVkKys7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBjbGVhcmVkO1xyXG4gIH1cclxuXHJcbiAgLy8gQ2xlYXIgYWxsIGNhY2hlXHJcbiAgY2xlYXIoKTogdm9pZCB7XHJcbiAgICB0aGlzLmNhY2hlLmNsZWFyKCk7XHJcbiAgICB0aGlzLnN0YXRzLnNpemUgPSAwO1xyXG4gICAgdGhpcy5zdGF0cy5pdGVtQ291bnQgPSAwO1xyXG4gICAgdGhpcy5zdGF0cy5kZWxldGVzICs9IHRoaXMuc3RhdHMuaXRlbUNvdW50O1xyXG4gIH1cclxuXHJcbiAgLy8gSGFuZGxlIHJlcXVlc3QgZGVkdXBsaWNhdGlvbiB3aXRoIGVuaGFuY2VkIGVycm9yIGhhbmRsaW5nXHJcbiAgYXN5bmMgZGVkdXBlPFQ+KFxyXG4gICAga2V5OiBzdHJpbmcsXHJcbiAgICByZXF1ZXN0Rm46ICgpID0+IFByb21pc2U8VD4sXHJcbiAgICBvcHRpb25zOiB7XHJcbiAgICAgIHR0bD86IG51bWJlcjtcclxuICAgICAgdGFncz86IHN0cmluZ1tdO1xyXG4gICAgICB1c2VDYWNoZT86IGJvb2xlYW47XHJcbiAgICB9ID0ge31cclxuICApOiBQcm9taXNlPFQ+IHtcclxuICAgIC8vIENoZWNrIGNhY2hlIGZpcnN0IGlmIGVuYWJsZWRcclxuICAgIGlmIChvcHRpb25zLnVzZUNhY2hlICE9PSBmYWxzZSkge1xyXG4gICAgICBjb25zdCBjYWNoZWQgPSB0aGlzLmdldDxUPihrZXkpO1xyXG4gICAgICBpZiAoY2FjaGVkICE9PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIGNhY2hlZDtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIENoZWNrIGlmIHJlcXVlc3QgaXMgYWxyZWFkeSBwZW5kaW5nXHJcbiAgICBjb25zdCBwZW5kaW5nID0gdGhpcy5wZW5kaW5nUmVxdWVzdHMuZ2V0KGtleSk7XHJcbiAgICBpZiAocGVuZGluZykge1xyXG4gICAgICByZXR1cm4gcGVuZGluZyBhcyBQcm9taXNlPFQ+O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEV4ZWN1dGUgcmVxdWVzdCBhbmQgY2FjaGUgdGhlIHByb21pc2VcclxuICAgIGNvbnN0IHByb21pc2UgPSByZXF1ZXN0Rm4oKVxyXG4gICAgICAudGhlbihyZXN1bHQgPT4ge1xyXG4gICAgICAgIC8vIENhY2hlIHN1Y2Nlc3NmdWwgcmVzdWx0c1xyXG4gICAgICAgIGlmIChvcHRpb25zLnVzZUNhY2hlICE9PSBmYWxzZSkge1xyXG4gICAgICAgICAgdGhpcy5zZXQoa2V5LCByZXN1bHQsIHtcclxuICAgICAgICAgICAgdHRsOiBvcHRpb25zLnR0bCxcclxuICAgICAgICAgICAgdGFnczogb3B0aW9ucy50YWdzXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgfSlcclxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMucGVuZGluZ1JlcXVlc3RzLmRlbGV0ZShrZXkpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICB0aGlzLnBlbmRpbmdSZXF1ZXN0cy5zZXQoa2V5LCBwcm9taXNlKTtcclxuICAgIHJldHVybiBwcm9taXNlO1xyXG4gIH1cclxuXHJcbiAgLy8gR2V0IGNhY2hlIHN0YXRpc3RpY3NcclxuICBnZXRTdGF0cygpOiBDYWNoZVN0YXRzIHtcclxuICAgIHJldHVybiB7IC4uLnRoaXMuc3RhdHMgfTtcclxuICB9XHJcblxyXG4gIC8vIEdldCBjYWNoZSBoaXQgcmF0ZVxyXG4gIGdldEhpdFJhdGUoKTogbnVtYmVyIHtcclxuICAgIGNvbnN0IHRvdGFsID0gdGhpcy5zdGF0cy5oaXRzICsgdGhpcy5zdGF0cy5taXNzZXM7XHJcbiAgICByZXR1cm4gdG90YWwgPiAwID8gdGhpcy5zdGF0cy5oaXRzIC8gdG90YWwgOiAwO1xyXG4gIH1cclxuXHJcbiAgLy8gQ2xlYW51cCBleHBpcmVkIGVudHJpZXNcclxuICBjbGVhbnVwKCk6IHZvaWQge1xyXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgIGZvciAoY29uc3QgW2tleSwgZW50cnldIG9mIHRoaXMuY2FjaGUuZW50cmllcygpKSB7XHJcbiAgICAgIGlmIChub3cgLSBlbnRyeS50aW1lc3RhbXAgPiBlbnRyeS50dGwpIHtcclxuICAgICAgICB0aGlzLmNhY2hlLmRlbGV0ZShrZXkpO1xyXG4gICAgICAgIHRoaXMuc3RhdHMuc2l6ZSAtPSBlbnRyeS5zaXplO1xyXG4gICAgICAgIHRoaXMuc3RhdHMuaXRlbUNvdW50LS07XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIFBlcnNpc3QgY2FjaGUgdG8gbG9jYWxTdG9yYWdlXHJcbiAgcHJpdmF0ZSBwZXJzaXN0Q2FjaGUoKTogdm9pZCB7XHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcgfHwgIXdpbmRvdy5sb2NhbFN0b3JhZ2UpIHJldHVybjtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBwZXJzaXN0YWJsZURhdGEgPSBBcnJheS5mcm9tKHRoaXMuY2FjaGUuZW50cmllcygpKVxyXG4gICAgICAgIC5maWx0ZXIoKFssIGVudHJ5XSkgPT4ge1xyXG4gICAgICAgICAgLy8gT25seSBwZXJzaXN0IGVudHJpZXMgdGhhdCBoYXZlbid0IGV4cGlyZWQgYW5kIGFyZW4ndCB0b28gbGFyZ2VcclxuICAgICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XHJcbiAgICAgICAgICByZXR1cm4gKG5vdyAtIGVudHJ5LnRpbWVzdGFtcCA8IGVudHJ5LnR0bCkgJiYgZW50cnkuc2l6ZSA8IDEwMjQgKiAxMDI0OyAvLyA8IDFNQlxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLm1hcCgoW2tleSwgZW50cnldKSA9PiBba2V5LCB7XHJcbiAgICAgICAgICBkYXRhOiBlbnRyeS5kYXRhLFxyXG4gICAgICAgICAgdGltZXN0YW1wOiBlbnRyeS50aW1lc3RhbXAsXHJcbiAgICAgICAgICB0dGw6IGVudHJ5LnR0bCxcclxuICAgICAgICAgIGFjY2Vzc0NvdW50OiBlbnRyeS5hY2Nlc3NDb3VudCxcclxuICAgICAgICAgIGxhc3RBY2Nlc3NlZDogZW50cnkubGFzdEFjY2Vzc2VkLFxyXG4gICAgICAgICAgc2l6ZTogZW50cnkuc2l6ZSxcclxuICAgICAgICAgIHRhZ3M6IGVudHJ5LnRhZ3NcclxuICAgICAgICB9XSk7XHJcblxyXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0aGlzLmNvbmZpZy5wZXJzaXN0ZW5jZUtleSwgSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGRhdGE6IHBlcnNpc3RhYmxlRGF0YSxcclxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcclxuICAgICAgfSkpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gcGVyc2lzdCBjYWNoZTonLCBlcnJvcik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBMb2FkIHBlcnNpc3RlZCBjYWNoZSBmcm9tIGxvY2FsU3RvcmFnZVxyXG4gIHByaXZhdGUgbG9hZFBlcnNpc3RlZENhY2hlKCk6IHZvaWQge1xyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnIHx8ICF3aW5kb3cubG9jYWxTdG9yYWdlKSByZXR1cm47XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcGVyc2lzdGVkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0odGhpcy5jb25maWcucGVyc2lzdGVuY2VLZXkpO1xyXG4gICAgICBpZiAoIXBlcnNpc3RlZCkgcmV0dXJuO1xyXG5cclxuICAgICAgY29uc3QgeyBkYXRhLCB0aW1lc3RhbXAgfSA9IEpTT04ucGFyc2UocGVyc2lzdGVkKTtcclxuICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuXHJcbiAgICAgIC8vIE9ubHkgbG9hZCBpZiBwZXJzaXN0ZWQgd2l0aGluIGxhc3QgMjQgaG91cnNcclxuICAgICAgaWYgKG5vdyAtIHRpbWVzdGFtcCA+IDI0ICogNjAgKiA2MCAqIDEwMDApIHtcclxuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSh0aGlzLmNvbmZpZy5wZXJzaXN0ZW5jZUtleSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmb3IgKGNvbnN0IFtrZXksIGVudHJ5XSBvZiBkYXRhKSB7XHJcbiAgICAgICAgLy8gQ2hlY2sgaWYgZW50cnkgaXMgc3RpbGwgdmFsaWRcclxuICAgICAgICBpZiAobm93IC0gZW50cnkudGltZXN0YW1wIDwgZW50cnkudHRsKSB7XHJcbiAgICAgICAgICB0aGlzLmNhY2hlLnNldChrZXksIGVudHJ5KTtcclxuICAgICAgICAgIHRoaXMuc3RhdHMuc2l6ZSArPSBlbnRyeS5zaXplO1xyXG4gICAgICAgICAgdGhpcy5zdGF0cy5pdGVtQ291bnQrKztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKGBMb2FkZWQgJHt0aGlzLnN0YXRzLml0ZW1Db3VudH0gcGVyc2lzdGVkIGNhY2hlIGVudHJpZXNgKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIGxvYWQgcGVyc2lzdGVkIGNhY2hlOicsIGVycm9yKTtcclxuICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0odGhpcy5jb25maWcucGVyc2lzdGVuY2VLZXkpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gV2FybSB1cCBjYWNoZSB3aXRoIGZyZXF1ZW50bHkgYWNjZXNzZWQgZGF0YVxyXG4gIGFzeW5jIHdhcm11cChrZXlzOiBzdHJpbmdbXSk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgY29uc3Qgd2FybXVwUHJvbWlzZXMgPSBrZXlzLm1hcChhc3luYyAoa2V5KSA9PiB7XHJcbiAgICAgIC8vIFRoaXMgd291bGQgdHlwaWNhbGx5IGZldGNoIGZyb20gYSBmYXN0IHNvdXJjZSBvciBwcmUtY29tcHV0ZWQgZGF0YVxyXG4gICAgICAvLyBGb3Igbm93LCBqdXN0IGVuc3VyZSB0aGUga2V5IGV4aXN0cyBpbiBjYWNoZVxyXG4gICAgICByZXR1cm4gdGhpcy5jYWNoZS5oYXMoa2V5KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGF3YWl0IFByb21pc2UuYWxsKHdhcm11cFByb21pc2VzKTtcclxuICB9XHJcbn1cclxuXHJcbi8vIEdsb2JhbCBhZHZhbmNlZCBjYWNoZSBpbnN0YW5jZSB3aXRoIG9wdGltaXplZCBzZXR0aW5nc1xyXG5leHBvcnQgY29uc3QgYWR2YW5jZWRBcGlDYWNoZSA9IG5ldyBBZHZhbmNlZEFQSUNhY2hlKHtcclxuICBtYXhTaXplOiAxMDAgKiAxMDI0ICogMTAyNCwgLy8gMTAwTUIgZm9yIGJldHRlciBwZXJmb3JtYW5jZVxyXG4gIGRlZmF1bHRUVEw6IDEwICogNjAgKiAxMDAwLCAvLyAxMCBtaW51dGVzIGZvciBiZXR0ZXIgY2FjaGUgaGl0IHJhdGVzXHJcbiAgZW5hYmxlUGVyc2lzdGVuY2U6IHRydWUsXHJcbiAgcGVyc2lzdGVuY2VLZXk6ICdwb2ludHMtY29tcGFuaW9uLWNhY2hlLXYyJyxcclxuICBlbmFibGVDb21wcmVzc2lvbjogZmFsc2UsIC8vIENhbiBiZSBlbmFibGVkIGxhdGVyIHdpdGggY29tcHJlc3Npb24gbGlicmFyeVxyXG4gIGxydUVuYWJsZWQ6IHRydWVcclxufSk7XHJcblxyXG4vLyBMZWdhY3kgY2FjaGUgaW5zdGFuY2UgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcclxuZXhwb3J0IGNvbnN0IGFwaUNhY2hlID0gYWR2YW5jZWRBcGlDYWNoZTtcclxuXHJcbi8vIENhY2hlIHdhcm1pbmcgdXRpbGl0eVxyXG5leHBvcnQgY29uc3Qgd2FybXVwQ2FjaGUgPSBhc3luYyAoZnJlcXVlbnRseVVzZWRLZXlzOiBzdHJpbmdbXSkgPT4ge1xyXG4gIGF3YWl0IGFkdmFuY2VkQXBpQ2FjaGUud2FybXVwKGZyZXF1ZW50bHlVc2VkS2V5cyk7XHJcbn07XHJcblxyXG4vLyBDYWNoZSBtb25pdG9yaW5nIHV0aWxpdHlcclxuZXhwb3J0IGNvbnN0IGdldENhY2hlTWV0cmljcyA9ICgpID0+IHtcclxuICBjb25zdCBzdGF0cyA9IGFkdmFuY2VkQXBpQ2FjaGUuZ2V0U3RhdHMoKTtcclxuICBjb25zdCBoaXRSYXRlID0gYWR2YW5jZWRBcGlDYWNoZS5nZXRIaXRSYXRlKCk7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICAuLi5zdGF0cyxcclxuICAgIGhpdFJhdGU6IGAkeyhoaXRSYXRlICogMTAwKS50b0ZpeGVkKDIpfSVgLFxyXG4gICAgc2l6ZUZvcm1hdHRlZDogYCR7KHN0YXRzLnNpemUgLyAxMDI0IC8gMTAyNCkudG9GaXhlZCgyKX1NQmAsXHJcbiAgICBlZmZpY2llbmN5OiBoaXRSYXRlID4gMC44ID8gJ0V4Y2VsbGVudCcgOiBoaXRSYXRlID4gMC42ID8gJ0dvb2QnIDogJ05lZWRzIE9wdGltaXphdGlv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