729c9b9b20e163027114190a98e1c7e9
"use strict";

exports.__esModule = true;
exports.default = VirtualBusinessGrid;
var _react = _interopRequireWildcard(require("react"));
var _framerMotion = require("framer-motion");
var _lucideReact = require("lucide-react");
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function (e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (const t in e) "default" !== t && {}.hasOwnProperty.call(e, t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, t)) && (i.get || i.set) ? o(f, t, i) : f[t] = e[t]); return f; })(e, t); }
const BusinessCard = /*#__PURE__*/_react.default.memo(({
  business,
  isSelected,
  onClick,
  category,
  index
}) => {
  const handleKeyDown = e => {
    if (e.key === 'Enter' || e.key === ' ') {
      e.preventDefault();
      onClick();
    }
  };
  return /*#__PURE__*/_react.default.createElement(_framerMotion.motion.div, {
    initial: {
      opacity: 0,
      y: 20
    },
    animate: {
      opacity: 1,
      y: 0
    },
    exit: {
      opacity: 0,
      y: -20
    },
    transition: {
      duration: 0.3
    },
    onClick: onClick,
    onKeyDown: handleKeyDown,
    className: `cursor-pointer bg-white rounded-xl p-4 border-2 transition-all duration-200 hover:shadow-lg hover:border-blue-300 ${isSelected ? 'border-blue-500 bg-blue-50 shadow-md' : 'border-gray-200 hover:border-blue-300'}`,
    "data-testid": `business-card-${business.id || index}`,
    "aria-label": `Select ${business.name}`,
    role: "button",
    tabIndex: 0
  }, /*#__PURE__*/_react.default.createElement("div", {
    className: "flex items-start justify-between mb-3"
  }, /*#__PURE__*/_react.default.createElement("div", {
    className: "flex-1"
  }, /*#__PURE__*/_react.default.createElement("h3", {
    className: "font-semibold text-gray-900 text-lg truncate"
  }, business.name), /*#__PURE__*/_react.default.createElement("p", {
    className: "text-sm text-gray-600 mt-1"
  }, business.address)), category && /*#__PURE__*/_react.default.createElement("div", {
    className: `px-3 py-1 rounded-full text-xs font-medium ${category.color}`
  }, category.icon)), /*#__PURE__*/_react.default.createElement("div", {
    className: "flex items-center justify-between"
  }, /*#__PURE__*/_react.default.createElement("div", {
    className: "flex items-center space-x-4"
  }, business.rating && /*#__PURE__*/_react.default.createElement("div", {
    className: "flex items-center space-x-1"
  }, /*#__PURE__*/_react.default.createElement(_lucideReact.Star, {
    className: "h-4 w-4 text-yellow-400 fill-current"
  }), /*#__PURE__*/_react.default.createElement("span", {
    className: "text-gray-600 font-medium"
  }, business.rating)), business.distance && /*#__PURE__*/_react.default.createElement("div", {
    className: "flex items-center space-x-1 text-gray-500"
  }, /*#__PURE__*/_react.default.createElement(_lucideReact.MapPin, {
    className: "h-4 w-4"
  }), /*#__PURE__*/_react.default.createElement("span", {
    className: "font-medium"
  }, business.distance < 1609.34 ? `${Math.round(business.distance * 3.28084)}ft` : `${(business.distance * 0.000621371).toFixed(1)}mi`))), /*#__PURE__*/_react.default.createElement(_lucideReact.Navigation, {
    className: "h-5 w-5 text-gray-400"
  })));
});
BusinessCard.displayName = 'BusinessCard';
function VirtualBusinessGrid({
  businesses,
  selectedBusiness,
  onBusinessSelect,
  currentCategory,
  className = ""
}) {
  const [visibleRange, setVisibleRange] = (0, _react.useState)({
    start: 0,
    end: 20
  });

  // Calculate responsive columns
  const getColumnCount = () => {
    if (typeof window === 'undefined') return 3; // SSR fallback
    if (window.innerWidth < 768) return 1; // Mobile
    if (window.innerWidth < 1024) return 2; // Tablet
    return 3; // Desktop
  };
  const columnCount = getColumnCount();
  const itemHeight = 160;
  const visibleItems = businesses.slice(visibleRange.start, visibleRange.end);

  // Handle scroll to update visible range
  const handleScroll = e => {
    const scrollTop = e.currentTarget.scrollTop;
    const containerHeight = e.currentTarget.clientHeight;
    const start = Math.floor(scrollTop / itemHeight) * columnCount;
    const end = start + (Math.ceil(containerHeight / itemHeight) + 2) * columnCount;
    setVisibleRange({
      start: Math.max(0, start),
      end: Math.min(businesses.length, end)
    });
  };
  if (businesses.length === 0) {
    return /*#__PURE__*/_react.default.createElement("div", {
      className: `flex items-center justify-center h-64 text-gray-500 ${className}`
    }, /*#__PURE__*/_react.default.createElement("div", {
      className: "text-center"
    }, /*#__PURE__*/_react.default.createElement(_lucideReact.MapPin, {
      className: "h-12 w-12 mx-auto mb-4 text-gray-300"
    }), /*#__PURE__*/_react.default.createElement("p", null, "No businesses found in this area"), /*#__PURE__*/_react.default.createElement("p", {
      className: "text-sm mt-2"
    }, "Try adjusting your search radius or category")));
  }
  return /*#__PURE__*/_react.default.createElement("div", {
    className: className
  }, /*#__PURE__*/_react.default.createElement("div", {
    className: "overflow-auto",
    style: {
      height: '600px'
    },
    onScroll: handleScroll,
    "data-testid": "virtual-grid-container"
  }, /*#__PURE__*/_react.default.createElement("div", {
    style: {
      height: Math.ceil(businesses.length / columnCount) * itemHeight,
      position: 'relative'
    }
  }, /*#__PURE__*/_react.default.createElement("div", {
    className: "grid gap-4 p-4",
    style: {
      gridTemplateColumns: `repeat(${columnCount}, 1fr)`,
      position: 'absolute',
      top: Math.floor(visibleRange.start / columnCount) * itemHeight,
      width: '100%'
    }
  }, visibleItems.map((business, index) => /*#__PURE__*/_react.default.createElement(BusinessCard, {
    key: business.id || index,
    business: business,
    isSelected: selectedBusiness?.id === business.id,
    onClick: () => onBusinessSelect(business),
    category: currentCategory,
    index: index
  }))))));
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsInJlcXVpcmUiLCJfZnJhbWVyTW90aW9uIiwiX2x1Y2lkZVJlYWN0IiwiZSIsInQiLCJXZWFrTWFwIiwiciIsIm4iLCJfX2VzTW9kdWxlIiwibyIsImkiLCJmIiwiX19wcm90b19fIiwiZGVmYXVsdCIsImhhcyIsImdldCIsInNldCIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiQnVzaW5lc3NDYXJkIiwiUmVhY3QiLCJtZW1vIiwiYnVzaW5lc3MiLCJpc1NlbGVjdGVkIiwib25DbGljayIsImNhdGVnb3J5IiwiaW5kZXgiLCJoYW5kbGVLZXlEb3duIiwia2V5IiwicHJldmVudERlZmF1bHQiLCJjcmVhdGVFbGVtZW50IiwibW90aW9uIiwiZGl2IiwiaW5pdGlhbCIsIm9wYWNpdHkiLCJ5IiwiYW5pbWF0ZSIsImV4aXQiLCJ0cmFuc2l0aW9uIiwiZHVyYXRpb24iLCJvbktleURvd24iLCJjbGFzc05hbWUiLCJpZCIsIm5hbWUiLCJyb2xlIiwidGFiSW5kZXgiLCJhZGRyZXNzIiwiY29sb3IiLCJpY29uIiwicmF0aW5nIiwiU3RhciIsImRpc3RhbmNlIiwiTWFwUGluIiwiTWF0aCIsInJvdW5kIiwidG9GaXhlZCIsIk5hdmlnYXRpb24iLCJkaXNwbGF5TmFtZSIsIlZpcnR1YWxCdXNpbmVzc0dyaWQiLCJidXNpbmVzc2VzIiwic2VsZWN0ZWRCdXNpbmVzcyIsIm9uQnVzaW5lc3NTZWxlY3QiLCJjdXJyZW50Q2F0ZWdvcnkiLCJ2aXNpYmxlUmFuZ2UiLCJzZXRWaXNpYmxlUmFuZ2UiLCJ1c2VTdGF0ZSIsInN0YXJ0IiwiZW5kIiwiZ2V0Q29sdW1uQ291bnQiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiY29sdW1uQ291bnQiLCJpdGVtSGVpZ2h0IiwidmlzaWJsZUl0ZW1zIiwic2xpY2UiLCJoYW5kbGVTY3JvbGwiLCJzY3JvbGxUb3AiLCJjdXJyZW50VGFyZ2V0IiwiY29udGFpbmVySGVpZ2h0IiwiY2xpZW50SGVpZ2h0IiwiZmxvb3IiLCJjZWlsIiwibWF4IiwibWluIiwibGVuZ3RoIiwic3R5bGUiLCJoZWlnaHQiLCJvblNjcm9sbCIsInBvc2l0aW9uIiwiZ3JpZFRlbXBsYXRlQ29sdW1ucyIsInRvcCIsIndpZHRoIiwibWFwIl0sInNvdXJjZXMiOlsiVmlydHVhbEJ1c2luZXNzR3JpZC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBtb3Rpb24gfSBmcm9tICdmcmFtZXItbW90aW9uJztcclxuaW1wb3J0IHsgTWFwUGluLCBTdGFyLCBOYXZpZ2F0aW9uIH0gZnJvbSAnbHVjaWRlLXJlYWN0JztcclxuaW1wb3J0IHsgQnVzaW5lc3MgfSBmcm9tICdAL3R5cGVzL2xvY2F0aW9uLnR5cGVzJztcclxuXHJcbmludGVyZmFjZSBWaXJ0dWFsQnVzaW5lc3NHcmlkUHJvcHMge1xyXG4gIGJ1c2luZXNzZXM6IEJ1c2luZXNzW107XHJcbiAgc2VsZWN0ZWRCdXNpbmVzczogQnVzaW5lc3MgfCBudWxsO1xyXG4gIG9uQnVzaW5lc3NTZWxlY3Q6IChidXNpbmVzczogQnVzaW5lc3MpID0+IHZvaWQ7XHJcbiAgY3VycmVudENhdGVnb3J5Pzoge1xyXG4gICAgaWNvbjogc3RyaW5nO1xyXG4gICAgY29sb3I6IHN0cmluZztcclxuICB9O1xyXG4gIGNsYXNzTmFtZT86IHN0cmluZztcclxufVxyXG5cclxuaW50ZXJmYWNlIEJ1c2luZXNzQ2FyZFByb3BzIHtcclxuICBidXNpbmVzczogQnVzaW5lc3M7XHJcbiAgaXNTZWxlY3RlZDogYm9vbGVhbjtcclxuICBvbkNsaWNrOiAoKSA9PiB2b2lkO1xyXG4gIGNhdGVnb3J5Pzoge1xyXG4gICAgaWNvbjogc3RyaW5nO1xyXG4gICAgY29sb3I6IHN0cmluZztcclxuICB9O1xyXG4gIGluZGV4OiBudW1iZXI7XHJcbn1cclxuXHJcbmNvbnN0IEJ1c2luZXNzQ2FyZCA9IFJlYWN0Lm1lbW88QnVzaW5lc3NDYXJkUHJvcHM+KCh7XHJcbiAgYnVzaW5lc3MsXHJcbiAgaXNTZWxlY3RlZCxcclxuICBvbkNsaWNrLFxyXG4gIGNhdGVnb3J5LFxyXG4gIGluZGV4XHJcbn0pID0+IHtcclxuICBjb25zdCBoYW5kbGVLZXlEb3duID0gKGU6IFJlYWN0LktleWJvYXJkRXZlbnQpID0+IHtcclxuICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJyB8fCBlLmtleSA9PT0gJyAnKSB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgb25DbGljaygpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8bW90aW9uLmRpdlxyXG4gICAgICBpbml0aWFsPXt7IG9wYWNpdHk6IDAsIHk6IDIwIH19XHJcbiAgICAgIGFuaW1hdGU9e3sgb3BhY2l0eTogMSwgeTogMCB9fVxyXG4gICAgICBleGl0PXt7IG9wYWNpdHk6IDAsIHk6IC0yMCB9fVxyXG4gICAgICB0cmFuc2l0aW9uPXt7IGR1cmF0aW9uOiAwLjMgfX1cclxuICAgICAgb25DbGljaz17b25DbGlja31cclxuICAgICAgb25LZXlEb3duPXtoYW5kbGVLZXlEb3dufVxyXG4gICAgICBjbGFzc05hbWU9e2BjdXJzb3ItcG9pbnRlciBiZy13aGl0ZSByb3VuZGVkLXhsIHAtNCBib3JkZXItMiB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0yMDAgaG92ZXI6c2hhZG93LWxnIGhvdmVyOmJvcmRlci1ibHVlLTMwMCAke1xyXG4gICAgICAgIGlzU2VsZWN0ZWRcclxuICAgICAgICAgID8gJ2JvcmRlci1ibHVlLTUwMCBiZy1ibHVlLTUwIHNoYWRvdy1tZCdcclxuICAgICAgICAgIDogJ2JvcmRlci1ncmF5LTIwMCBob3Zlcjpib3JkZXItYmx1ZS0zMDAnXHJcbiAgICAgIH1gfVxyXG4gICAgICBkYXRhLXRlc3RpZD17YGJ1c2luZXNzLWNhcmQtJHtidXNpbmVzcy5pZCB8fCBpbmRleH1gfVxyXG4gICAgICBhcmlhLWxhYmVsPXtgU2VsZWN0ICR7YnVzaW5lc3MubmFtZX1gfVxyXG4gICAgICByb2xlPVwiYnV0dG9uXCJcclxuICAgICAgdGFiSW5kZXg9ezB9XHJcbiAgICA+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1zdGFydCBqdXN0aWZ5LWJldHdlZW4gbWItM1wiPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xXCI+XHJcbiAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwIHRleHQtbGcgdHJ1bmNhdGVcIj57YnVzaW5lc3MubmFtZX08L2gzPlxyXG4gICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LWdyYXktNjAwIG10LTFcIj57YnVzaW5lc3MuYWRkcmVzc308L3A+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAge2NhdGVnb3J5ICYmIChcclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgcHgtMyBweS0xIHJvdW5kZWQtZnVsbCB0ZXh0LXhzIGZvbnQtbWVkaXVtICR7Y2F0ZWdvcnkuY29sb3J9YH0+XHJcbiAgICAgICAgICAgIHtjYXRlZ29yeS5pY29ufVxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKX1cclxuICAgICAgPC9kaXY+XHJcblxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlblwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC00XCI+XHJcbiAgICAgICAgICB7YnVzaW5lc3MucmF0aW5nICYmIChcclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTFcIj5cclxuICAgICAgICAgICAgICA8U3RhciBjbGFzc05hbWU9XCJoLTQgdy00IHRleHQteWVsbG93LTQwMCBmaWxsLWN1cnJlbnRcIiAvPlxyXG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZ3JheS02MDAgZm9udC1tZWRpdW1cIj57YnVzaW5lc3MucmF0aW5nfTwvc3Bhbj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICApfVxyXG4gICAgICAgICAge2J1c2luZXNzLmRpc3RhbmNlICYmIChcclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTEgdGV4dC1ncmF5LTUwMFwiPlxyXG4gICAgICAgICAgICAgIDxNYXBQaW4gY2xhc3NOYW1lPVwiaC00IHctNFwiIC8+XHJcbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZm9udC1tZWRpdW1cIj5cclxuICAgICAgICAgICAgICAgIHtidXNpbmVzcy5kaXN0YW5jZSA8IDE2MDkuMzRcclxuICAgICAgICAgICAgICAgICAgPyBgJHtNYXRoLnJvdW5kKGJ1c2luZXNzLmRpc3RhbmNlICogMy4yODA4NCl9ZnRgXHJcbiAgICAgICAgICAgICAgICAgIDogYCR7KGJ1c2luZXNzLmRpc3RhbmNlICogMC4wMDA2MjEzNzEpLnRvRml4ZWQoMSl9bWlgXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICl9XHJcbiAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgIDxOYXZpZ2F0aW9uIGNsYXNzTmFtZT1cImgtNSB3LTUgdGV4dC1ncmF5LTQwMFwiIC8+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9tb3Rpb24uZGl2PlxyXG4gICk7XHJcbn0pO1xyXG5cclxuQnVzaW5lc3NDYXJkLmRpc3BsYXlOYW1lID0gJ0J1c2luZXNzQ2FyZCc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBWaXJ0dWFsQnVzaW5lc3NHcmlkKHtcclxuICBidXNpbmVzc2VzLFxyXG4gIHNlbGVjdGVkQnVzaW5lc3MsXHJcbiAgb25CdXNpbmVzc1NlbGVjdCxcclxuICBjdXJyZW50Q2F0ZWdvcnksXHJcbiAgY2xhc3NOYW1lID0gXCJcIlxyXG59OiBWaXJ0dWFsQnVzaW5lc3NHcmlkUHJvcHMpIHtcclxuICBjb25zdCBbdmlzaWJsZVJhbmdlLCBzZXRWaXNpYmxlUmFuZ2VdID0gdXNlU3RhdGUoeyBzdGFydDogMCwgZW5kOiAyMCB9KTtcclxuXHJcbiAgLy8gQ2FsY3VsYXRlIHJlc3BvbnNpdmUgY29sdW1uc1xyXG4gIGNvbnN0IGdldENvbHVtbkNvdW50ID0gKCkgPT4ge1xyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gMzsgLy8gU1NSIGZhbGxiYWNrXHJcbiAgICBpZiAod2luZG93LmlubmVyV2lkdGggPCA3NjgpIHJldHVybiAxOyAvLyBNb2JpbGVcclxuICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8IDEwMjQpIHJldHVybiAyOyAvLyBUYWJsZXRcclxuICAgIHJldHVybiAzOyAvLyBEZXNrdG9wXHJcbiAgfTtcclxuXHJcbiAgY29uc3QgY29sdW1uQ291bnQgPSBnZXRDb2x1bW5Db3VudCgpO1xyXG4gIGNvbnN0IGl0ZW1IZWlnaHQgPSAxNjA7XHJcbiAgY29uc3QgdmlzaWJsZUl0ZW1zID0gYnVzaW5lc3Nlcy5zbGljZSh2aXNpYmxlUmFuZ2Uuc3RhcnQsIHZpc2libGVSYW5nZS5lbmQpO1xyXG5cclxuICAvLyBIYW5kbGUgc2Nyb2xsIHRvIHVwZGF0ZSB2aXNpYmxlIHJhbmdlXHJcbiAgY29uc3QgaGFuZGxlU2Nyb2xsID0gKGU6IFJlYWN0LlVJRXZlbnQ8SFRNTERpdkVsZW1lbnQ+KSA9PiB7XHJcbiAgICBjb25zdCBzY3JvbGxUb3AgPSBlLmN1cnJlbnRUYXJnZXQuc2Nyb2xsVG9wO1xyXG4gICAgY29uc3QgY29udGFpbmVySGVpZ2h0ID0gZS5jdXJyZW50VGFyZ2V0LmNsaWVudEhlaWdodDtcclxuICAgIGNvbnN0IHN0YXJ0ID0gTWF0aC5mbG9vcihzY3JvbGxUb3AgLyBpdGVtSGVpZ2h0KSAqIGNvbHVtbkNvdW50O1xyXG4gICAgY29uc3QgZW5kID0gc3RhcnQgKyAoTWF0aC5jZWlsKGNvbnRhaW5lckhlaWdodCAvIGl0ZW1IZWlnaHQpICsgMikgKiBjb2x1bW5Db3VudDtcclxuICAgIHNldFZpc2libGVSYW5nZSh7IHN0YXJ0OiBNYXRoLm1heCgwLCBzdGFydCksIGVuZDogTWF0aC5taW4oYnVzaW5lc3Nlcy5sZW5ndGgsIGVuZCkgfSk7XHJcbiAgfTtcclxuXHJcbiAgaWYgKGJ1c2luZXNzZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17YGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGgtNjQgdGV4dC1ncmF5LTUwMCAke2NsYXNzTmFtZX1gfT5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyXCI+XHJcbiAgICAgICAgICA8TWFwUGluIGNsYXNzTmFtZT1cImgtMTIgdy0xMiBteC1hdXRvIG1iLTQgdGV4dC1ncmF5LTMwMFwiIC8+XHJcbiAgICAgICAgICA8cD5ObyBidXNpbmVzc2VzIGZvdW5kIGluIHRoaXMgYXJlYTwvcD5cclxuICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gbXQtMlwiPlRyeSBhZGp1c3RpbmcgeW91ciBzZWFyY2ggcmFkaXVzIG9yIGNhdGVnb3J5PC9wPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZX0+XHJcbiAgICAgIDxkaXZcclxuICAgICAgICBjbGFzc05hbWU9XCJvdmVyZmxvdy1hdXRvXCJcclxuICAgICAgICBzdHlsZT17eyBoZWlnaHQ6ICc2MDBweCcgfX1cclxuICAgICAgICBvblNjcm9sbD17aGFuZGxlU2Nyb2xsfVxyXG4gICAgICAgIGRhdGEtdGVzdGlkPVwidmlydHVhbC1ncmlkLWNvbnRhaW5lclwiXHJcbiAgICAgID5cclxuICAgICAgICA8ZGl2XHJcbiAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICBoZWlnaHQ6IE1hdGguY2VpbChidXNpbmVzc2VzLmxlbmd0aCAvIGNvbHVtbkNvdW50KSAqIGl0ZW1IZWlnaHQsXHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnXHJcbiAgICAgICAgICB9fVxyXG4gICAgICAgID5cclxuICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiZ3JpZCBnYXAtNCBwLTRcIlxyXG4gICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgIGdyaWRUZW1wbGF0ZUNvbHVtbnM6IGByZXBlYXQoJHtjb2x1bW5Db3VudH0sIDFmcilgLFxyXG4gICAgICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxyXG4gICAgICAgICAgICAgIHRvcDogTWF0aC5mbG9vcih2aXNpYmxlUmFuZ2Uuc3RhcnQgLyBjb2x1bW5Db3VudCkgKiBpdGVtSGVpZ2h0LFxyXG4gICAgICAgICAgICAgIHdpZHRoOiAnMTAwJSdcclxuICAgICAgICAgICAgfX1cclxuICAgICAgICAgID5cclxuICAgICAgICAgICAge3Zpc2libGVJdGVtcy5tYXAoKGJ1c2luZXNzLCBpbmRleCkgPT4gKFxyXG4gICAgICAgICAgICAgIDxCdXNpbmVzc0NhcmRcclxuICAgICAgICAgICAgICAgIGtleT17YnVzaW5lc3MuaWQgfHwgaW5kZXh9XHJcbiAgICAgICAgICAgICAgICBidXNpbmVzcz17YnVzaW5lc3N9XHJcbiAgICAgICAgICAgICAgICBpc1NlbGVjdGVkPXtzZWxlY3RlZEJ1c2luZXNzPy5pZCA9PT0gYnVzaW5lc3MuaWR9XHJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBvbkJ1c2luZXNzU2VsZWN0KGJ1c2luZXNzKX1cclxuICAgICAgICAgICAgICAgIGNhdGVnb3J5PXtjdXJyZW50Q2F0ZWdvcnl9XHJcbiAgICAgICAgICAgICAgICBpbmRleD17aW5kZXh9XHJcbiAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgKSl9XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICApO1xyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLElBQUFBLE1BQUEsR0FBQUMsdUJBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLGFBQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLFlBQUEsR0FBQUYsT0FBQTtBQUF3RCxTQUFBRCx3QkFBQUksQ0FBQSxFQUFBQyxDQUFBLDZCQUFBQyxPQUFBLE1BQUFDLENBQUEsT0FBQUQsT0FBQSxJQUFBRSxDQUFBLE9BQUFGLE9BQUEsWUFBQU4sdUJBQUEsWUFBQUEsQ0FBQUksQ0FBQSxFQUFBQyxDQUFBLFNBQUFBLENBQUEsSUFBQUQsQ0FBQSxJQUFBQSxDQUFBLENBQUFLLFVBQUEsU0FBQUwsQ0FBQSxNQUFBTSxDQUFBLEVBQUFDLENBQUEsRUFBQUMsQ0FBQSxLQUFBQyxTQUFBLFFBQUFDLE9BQUEsRUFBQVYsQ0FBQSxpQkFBQUEsQ0FBQSx1QkFBQUEsQ0FBQSx5QkFBQUEsQ0FBQSxTQUFBUSxDQUFBLE1BQUFGLENBQUEsR0FBQUwsQ0FBQSxHQUFBRyxDQUFBLEdBQUFELENBQUEsUUFBQUcsQ0FBQSxDQUFBSyxHQUFBLENBQUFYLENBQUEsVUFBQU0sQ0FBQSxDQUFBTSxHQUFBLENBQUFaLENBQUEsR0FBQU0sQ0FBQSxDQUFBTyxHQUFBLENBQUFiLENBQUEsRUFBQVEsQ0FBQSxnQkFBQVAsQ0FBQSxJQUFBRCxDQUFBLGdCQUFBQyxDQUFBLE9BQUFhLGNBQUEsQ0FBQUMsSUFBQSxDQUFBZixDQUFBLEVBQUFDLENBQUEsT0FBQU0sQ0FBQSxJQUFBRCxDQUFBLEdBQUFVLE1BQUEsQ0FBQUMsY0FBQSxLQUFBRCxNQUFBLENBQUFFLHdC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