{"version":3,"names":["_react","_interopRequireWildcard","require","_framerMotion","_lucideReact","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","BusinessCard","React","memo","business","isSelected","onClick","category","index","handleKeyDown","key","preventDefault","createElement","motion","div","initial","opacity","y","animate","exit","transition","duration","onKeyDown","className","id","name","role","tabIndex","address","color","icon","rating","Star","distance","MapPin","Math","round","toFixed","Navigation","displayName","VirtualBusinessGrid","businesses","selectedBusiness","onBusinessSelect","currentCategory","visibleRange","setVisibleRange","useState","start","end","getColumnCount","window","innerWidth","columnCount","itemHeight","visibleItems","slice","handleScroll","scrollTop","currentTarget","containerHeight","clientHeight","floor","ceil","max","min","length","style","height","onScroll","position","gridTemplateColumns","top","width","map"],"sources":["VirtualBusinessGrid.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { MapPin, Star, Navigation } from 'lucide-react';\r\nimport { Business } from '@/types/location.types';\r\n\r\ninterface VirtualBusinessGridProps {\r\n  businesses: Business[];\r\n  selectedBusiness: Business | null;\r\n  onBusinessSelect: (business: Business) => void;\r\n  currentCategory?: {\r\n    icon: string;\r\n    color: string;\r\n  };\r\n  className?: string;\r\n}\r\n\r\ninterface BusinessCardProps {\r\n  business: Business;\r\n  isSelected: boolean;\r\n  onClick: () => void;\r\n  category?: {\r\n    icon: string;\r\n    color: string;\r\n  };\r\n  index: number;\r\n}\r\n\r\nconst BusinessCard = React.memo<BusinessCardProps>(({\r\n  business,\r\n  isSelected,\r\n  onClick,\r\n  category,\r\n  index\r\n}) => {\r\n  const handleKeyDown = (e: React.KeyboardEvent) => {\r\n    if (e.key === 'Enter' || e.key === ' ') {\r\n      e.preventDefault();\r\n      onClick();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0, y: 20 }}\r\n      animate={{ opacity: 1, y: 0 }}\r\n      exit={{ opacity: 0, y: -20 }}\r\n      transition={{ duration: 0.3 }}\r\n      onClick={onClick}\r\n      onKeyDown={handleKeyDown}\r\n      className={`cursor-pointer bg-white rounded-xl p-4 border-2 transition-all duration-200 hover:shadow-lg hover:border-blue-300 ${\r\n        isSelected\r\n          ? 'border-blue-500 bg-blue-50 shadow-md'\r\n          : 'border-gray-200 hover:border-blue-300'\r\n      }`}\r\n      data-testid={`business-card-${business.id || index}`}\r\n      aria-label={`Select ${business.name}`}\r\n      role=\"button\"\r\n      tabIndex={0}\r\n    >\r\n      <div className=\"flex items-start justify-between mb-3\">\r\n        <div className=\"flex-1\">\r\n          <h3 className=\"font-semibold text-gray-900 text-lg truncate\">{business.name}</h3>\r\n          <p className=\"text-sm text-gray-600 mt-1\">{business.address}</p>\r\n        </div>\r\n        {category && (\r\n          <div className={`px-3 py-1 rounded-full text-xs font-medium ${category.color}`}>\r\n            {category.icon}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"flex items-center space-x-4\">\r\n          {business.rating && (\r\n            <div className=\"flex items-center space-x-1\">\r\n              <Star className=\"h-4 w-4 text-yellow-400 fill-current\" />\r\n              <span className=\"text-gray-600 font-medium\">{business.rating}</span>\r\n            </div>\r\n          )}\r\n          {business.distance && (\r\n            <div className=\"flex items-center space-x-1 text-gray-500\">\r\n              <MapPin className=\"h-4 w-4\" />\r\n              <span className=\"font-medium\">\r\n                {business.distance < 1609.34\r\n                  ? `${Math.round(business.distance * 3.28084)}ft`\r\n                  : `${(business.distance * 0.000621371).toFixed(1)}mi`\r\n                }\r\n              </span>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <Navigation className=\"h-5 w-5 text-gray-400\" />\r\n      </div>\r\n    </motion.div>\r\n  );\r\n});\r\n\r\nBusinessCard.displayName = 'BusinessCard';\r\n\r\nexport default function VirtualBusinessGrid({\r\n  businesses,\r\n  selectedBusiness,\r\n  onBusinessSelect,\r\n  currentCategory,\r\n  className = \"\"\r\n}: VirtualBusinessGridProps) {\r\n  const [visibleRange, setVisibleRange] = useState({ start: 0, end: 20 });\r\n\r\n  // Calculate responsive columns\r\n  const getColumnCount = () => {\r\n    if (typeof window === 'undefined') return 3; // SSR fallback\r\n    if (window.innerWidth < 768) return 1; // Mobile\r\n    if (window.innerWidth < 1024) return 2; // Tablet\r\n    return 3; // Desktop\r\n  };\r\n\r\n  const columnCount = getColumnCount();\r\n  const itemHeight = 160;\r\n  const visibleItems = businesses.slice(visibleRange.start, visibleRange.end);\r\n\r\n  // Handle scroll to update visible range\r\n  const handleScroll = (e: React.UIEvent<HTMLDivElement>) => {\r\n    const scrollTop = e.currentTarget.scrollTop;\r\n    const containerHeight = e.currentTarget.clientHeight;\r\n    const start = Math.floor(scrollTop / itemHeight) * columnCount;\r\n    const end = start + (Math.ceil(containerHeight / itemHeight) + 2) * columnCount;\r\n    setVisibleRange({ start: Math.max(0, start), end: Math.min(businesses.length, end) });\r\n  };\r\n\r\n  if (businesses.length === 0) {\r\n    return (\r\n      <div className={`flex items-center justify-center h-64 text-gray-500 ${className}`}>\r\n        <div className=\"text-center\">\r\n          <MapPin className=\"h-12 w-12 mx-auto mb-4 text-gray-300\" />\r\n          <p>No businesses found in this area</p>\r\n          <p className=\"text-sm mt-2\">Try adjusting your search radius or category</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={className}>\r\n      <div\r\n        className=\"overflow-auto\"\r\n        style={{ height: '600px' }}\r\n        onScroll={handleScroll}\r\n        data-testid=\"virtual-grid-container\"\r\n      >\r\n        <div\r\n          style={{\r\n            height: Math.ceil(businesses.length / columnCount) * itemHeight,\r\n            position: 'relative'\r\n          }}\r\n        >\r\n          <div\r\n            className=\"grid gap-4 p-4\"\r\n            style={{\r\n              gridTemplateColumns: `repeat(${columnCount}, 1fr)`,\r\n              position: 'absolute',\r\n              top: Math.floor(visibleRange.start / columnCount) * itemHeight,\r\n              width: '100%'\r\n            }}\r\n          >\r\n            {visibleItems.map((business, index) => (\r\n              <BusinessCard\r\n                key={business.id || index}\r\n                business={business}\r\n                isSelected={selectedBusiness?.id === business.id}\r\n                onClick={() => onBusinessSelect(business)}\r\n                category={currentCategory}\r\n                index={index}\r\n              />\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]}