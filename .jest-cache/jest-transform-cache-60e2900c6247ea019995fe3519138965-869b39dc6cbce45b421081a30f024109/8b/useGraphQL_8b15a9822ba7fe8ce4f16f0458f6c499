5e98e68e03e1210ffe8b6766f0ad567a
"use strict";

exports.__esModule = true;
exports.NEARBY_BUSINESSES_QUERY = exports.BUSINESS_DETAILS_QUERY = exports.BUSINESSES_QUERY = void 0;
exports.useBusinessDetailsQuery = useBusinessDetailsQuery;
exports.useBusinessesQuery = useBusinessesQuery;
exports.useNearbyBusinessesQuery = useNearbyBusinessesQuery;
var _core = require("@apollo/client/core");
var _react = require("@apollo/client/react");
// Query documents exported for testing with MockedProvider
const BUSINESSES_QUERY = exports.BUSINESSES_QUERY = (0, _core.gql)`
  query Businesses($limit: Int, $category: String) {
    businesses(limit: $limit, category: $category) {
      id
      name
      category
    }
  }
`;
const BUSINESS_DETAILS_QUERY = exports.BUSINESS_DETAILS_QUERY = (0, _core.gql)`
  query BusinessDetails($id: ID!) {
    business(id: $id) {
      id
      name
      description
      rating
    }
  }
`;
const NEARBY_BUSINESSES_QUERY = exports.NEARBY_BUSINESSES_QUERY = (0, _core.gql)`
  query NearbyBusinesses($lat: Float!, $lng: Float!, $radius: Int) {
    nearbyBusinesses(lat: $lat, lng: $lng, radius: $radius) {
      id
      name
      distance
    }
  }
`;
function useBusinessesQuery(variables) {
  // Standard Apollo signature: useQuery(query, options)
  return (0, _react.useQuery)(BUSINESSES_QUERY, {
    variables
  });
}
function useBusinessDetailsQuery(idOrVars) {
  const variables = typeof idOrVars === 'string' ? {
    id: idOrVars
  } : idOrVars;
  return (0, _react.useQuery)(BUSINESS_DETAILS_QUERY, {
    variables,
    skip: !variables?.id
  });
}
function useNearbyBusinessesQuery(variables) {
  const normalized = 'lat' in variables ? variables : {
    lat: variables.latitude,
    lng: variables.longitude,
    radius: variables.radius,
    category: variables.category
  };
  const raw = (0, _react.useQuery)(NEARBY_BUSINESSES_QUERY, {
    variables: normalized,
    skip: !normalized?.lat || !normalized?.lng
  });

  // Sort nearbyBusinesses by distance ascending if present
  const sorted = raw && raw.data && Array.isArray(raw.data.nearbyBusinesses) ? {
    ...raw,
    data: {
      ...raw.data,
      nearbyBusinesses: [...raw.data.nearbyBusinesses].sort((a, b) => (a?.distance ?? 0) - (b?.distance ?? 0))
    }
  } : raw;
  return sorted;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY29yZSIsInJlcXVpcmUiLCJfcmVhY3QiLCJCVVNJTkVTU0VTX1FVRVJZIiwiZXhwb3J0cyIsImdxbCIsIkJVU0lORVNTX0RFVEFJTFNfUVVFUlkiLCJORUFSQllfQlVTSU5FU1NFU19RVUVSWSIsInVzZUJ1c2luZXNzZXNRdWVyeSIsInZhcmlhYmxlcyIsInVzZVF1ZXJ5IiwidXNlQnVzaW5lc3NEZXRhaWxzUXVlcnkiLCJpZE9yVmFycyIsImlkIiwic2tpcCIsInVzZU5lYXJieUJ1c2luZXNzZXNRdWVyeSIsIm5vcm1hbGl6ZWQiLCJsYXQiLCJsYXRpdHVkZSIsImxuZyIsImxvbmdpdHVkZSIsInJhZGl1cyIsImNhdGVnb3J5IiwicmF3Iiwic29ydGVkIiwiZGF0YSIsIkFycmF5IiwiaXNBcnJheSIsIm5lYXJieUJ1c2luZXNzZXMiLCJzb3J0IiwiYSIsImIiLCJkaXN0YW5jZSJdLCJzb3VyY2VzIjpbInVzZUdyYXBoUUwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ3FsIH0gZnJvbSAnQGFwb2xsby9jbGllbnQvY29yZSc7XHJcbmltcG9ydCB7IHVzZVF1ZXJ5IH0gZnJvbSAnQGFwb2xsby9jbGllbnQvcmVhY3QnO1xyXG5cclxuLy8gUXVlcnkgZG9jdW1lbnRzIGV4cG9ydGVkIGZvciB0ZXN0aW5nIHdpdGggTW9ja2VkUHJvdmlkZXJcclxuZXhwb3J0IGNvbnN0IEJVU0lORVNTRVNfUVVFUlkgPSBncWxgXHJcbiAgcXVlcnkgQnVzaW5lc3NlcygkbGltaXQ6IEludCwgJGNhdGVnb3J5OiBTdHJpbmcpIHtcclxuICAgIGJ1c2luZXNzZXMobGltaXQ6ICRsaW1pdCwgY2F0ZWdvcnk6ICRjYXRlZ29yeSkge1xyXG4gICAgICBpZFxyXG4gICAgICBuYW1lXHJcbiAgICAgIGNhdGVnb3J5XHJcbiAgICB9XHJcbiAgfVxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IEJVU0lORVNTX0RFVEFJTFNfUVVFUlkgPSBncWxgXHJcbiAgcXVlcnkgQnVzaW5lc3NEZXRhaWxzKCRpZDogSUQhKSB7XHJcbiAgICBidXNpbmVzcyhpZDogJGlkKSB7XHJcbiAgICAgIGlkXHJcbiAgICAgIG5hbWVcclxuICAgICAgZGVzY3JpcHRpb25cclxuICAgICAgcmF0aW5nXHJcbiAgICB9XHJcbiAgfVxyXG5gO1xyXG5cclxuZXhwb3J0IGNvbnN0IE5FQVJCWV9CVVNJTkVTU0VTX1FVRVJZID0gZ3FsYFxyXG4gIHF1ZXJ5IE5lYXJieUJ1c2luZXNzZXMoJGxhdDogRmxvYXQhLCAkbG5nOiBGbG9hdCEsICRyYWRpdXM6IEludCkge1xyXG4gICAgbmVhcmJ5QnVzaW5lc3NlcyhsYXQ6ICRsYXQsIGxuZzogJGxuZywgcmFkaXVzOiAkcmFkaXVzKSB7XHJcbiAgICAgIGlkXHJcbiAgICAgIG5hbWVcclxuICAgICAgZGlzdGFuY2VcclxuICAgIH1cclxuICB9XHJcbmA7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXNlQnVzaW5lc3Nlc1F1ZXJ5KFxyXG4gIHZhcmlhYmxlcz86IHsgbGltaXQ/OiBudW1iZXI7IGNhdGVnb3J5Pzogc3RyaW5nOyBvZmZzZXQ/OiBudW1iZXIgfVxyXG4pIHtcclxuICAvLyBTdGFuZGFyZCBBcG9sbG8gc2lnbmF0dXJlOiB1c2VRdWVyeShxdWVyeSwgb3B0aW9ucylcclxuICByZXR1cm4gKHVzZVF1ZXJ5IGFzIGFueSkoQlVTSU5FU1NFU19RVUVSWSwgeyB2YXJpYWJsZXMgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1c2VCdXNpbmVzc0RldGFpbHNRdWVyeShpZE9yVmFyczogc3RyaW5nIHwgeyBpZDogc3RyaW5nIH0pIHtcclxuICBjb25zdCB2YXJpYWJsZXMgPSB0eXBlb2YgaWRPclZhcnMgPT09ICdzdHJpbmcnID8geyBpZDogaWRPclZhcnMgfSA6IGlkT3JWYXJzO1xyXG4gIHJldHVybiAodXNlUXVlcnkgYXMgYW55KShCVVNJTkVTU19ERVRBSUxTX1FVRVJZLCB7IHZhcmlhYmxlcywgc2tpcDogIXZhcmlhYmxlcz8uaWQgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1c2VOZWFyYnlCdXNpbmVzc2VzUXVlcnkoXHJcbiAgdmFyaWFibGVzOlxyXG4gICAgfCB7IGxhdDogbnVtYmVyOyBsbmc6IG51bWJlcjsgcmFkaXVzPzogbnVtYmVyOyBjYXRlZ29yeT86IHN0cmluZyB9XHJcbiAgICB8IHsgbGF0aXR1ZGU6IG51bWJlcjsgbG9uZ2l0dWRlOiBudW1iZXI7IHJhZGl1cz86IG51bWJlcjsgY2F0ZWdvcnk/OiBzdHJpbmcgfVxyXG4pIHtcclxuICBjb25zdCBub3JtYWxpemVkID0gJ2xhdCcgaW4gdmFyaWFibGVzXHJcbiAgICA/IHZhcmlhYmxlc1xyXG4gICAgOiB7IGxhdDogKHZhcmlhYmxlcyBhcyBhbnkpLmxhdGl0dWRlLCBsbmc6ICh2YXJpYWJsZXMgYXMgYW55KS5sb25naXR1ZGUsIHJhZGl1czogKHZhcmlhYmxlcyBhcyBhbnkpLnJhZGl1cywgY2F0ZWdvcnk6ICh2YXJpYWJsZXMgYXMgYW55KS5jYXRlZ29yeSB9O1xyXG5cclxuICBjb25zdCByYXcgPSAodXNlUXVlcnkgYXMgYW55KShORUFSQllfQlVTSU5FU1NFU19RVUVSWSwgeyB2YXJpYWJsZXM6IG5vcm1hbGl6ZWQsIHNraXA6ICFub3JtYWxpemVkPy5sYXQgfHwgIW5vcm1hbGl6ZWQ/LmxuZyB9KTtcclxuXHJcbiAgLy8gU29ydCBuZWFyYnlCdXNpbmVzc2VzIGJ5IGRpc3RhbmNlIGFzY2VuZGluZyBpZiBwcmVzZW50XHJcbiAgY29uc3Qgc29ydGVkID0gcmF3ICYmIHJhdy5kYXRhICYmIEFycmF5LmlzQXJyYXkocmF3LmRhdGEubmVhcmJ5QnVzaW5lc3NlcylcclxuICAgID8ge1xyXG4gICAgICAgIC4uLnJhdyxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAuLi5yYXcuZGF0YSxcclxuICAgICAgICAgIG5lYXJieUJ1c2luZXNzZXM6IFsuLi5yYXcuZGF0YS5uZWFyYnlCdXNpbmVzc2VzXS5zb3J0KChhOiBhbnksIGI6IGFueSkgPT4gKGE/LmRpc3RhbmNlID8/IDApIC0gKGI/LmRpc3RhbmNlID8/IDApKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgOiByYXc7XHJcbiAgcmV0dXJuIHNvcnRlZDtcclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxJQUFBQSxLQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxNQUFBLEdBQUFELE9BQUE7QUFFQTtBQUNPLE1BQU1FLGdCQUFnQixHQUFBQyxPQUFBLENBQUFELGdCQUFBLEdBQUcsSUFBQUUsU0FBRztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFFTSxNQUFNQyxzQkFBc0IsR0FBQUYsT0FBQSxDQUFBRSxzQkFBQSxHQUFHLElBQUFELFNBQUc7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFFTSxNQUFNRSx1QkFBdUIsR0FBQUgsT0FBQSxDQUFBRyx1QkFBQSxHQUFHLElBQUFGLFNBQUc7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBRU0sU0FBU0csa0JBQWtCQSxDQUNoQ0MsU0FBa0UsRUFDbEU7RUFDQTtFQUNBLE9BQU8sSUFBQ0MsZUFBUSxFQUFTUCxnQkFBZ0IsRUFBRTtJQUFFTTtFQUFVLENBQUMsQ0FBQztBQUMzRDtBQUVPLFNBQVNFLHVCQUF1QkEsQ0FBQ0MsUUFBaUMsRUFBRTtFQUN6RSxNQUFNSCxTQUFTLEdBQUcsT0FBT0csUUFBUSxLQUFLLFFBQVEsR0FBRztJQUFFQyxFQUFFLEVBQUVEO0VBQVMsQ0FBQyxHQUFHQSxRQUFRO0VBQzVFLE9BQU8sSUFBQ0YsZUFBUSxFQUFTSixzQkFBc0IsRUFBRTtJQUFFRyxTQUFTO0lBQUVLLElBQUksRUFBRSxDQUFDTCxTQUFTLEVBQUVJO0VBQUcsQ0FBQyxDQUFDO0FBQ3ZGO0FBRU8sU0FBU0Usd0JBQXdCQSxDQUN0Q04sU0FFK0UsRUFDL0U7RUFDQSxNQUFNTyxVQUFVLEdBQUcsS0FBSyxJQUFJUCxTQUFTLEdBQ2pDQSxTQUFTLEdBQ1Q7SUFBRVEsR0FBRyxFQUFHUixTQUFTLENBQVNTLFFBQVE7SUFBRUMsR0FBRyxFQUFHVixTQUFTLENBQVNXLFNBQVM7SUFBRUMsTUFBTSxFQUFHWixTQUFTLENBQVNZLE1BQU07SUFBRUMsUUFBUSxFQUFHYixTQUFTLENBQVNhO0VBQVMsQ0FBQztFQUVySixNQUFNQyxHQUFHLEdBQUcsSUFBQ2IsZUFBUSxFQUFTSCx1QkFBdUIsRUFBRTtJQUFFRSxTQUFTLEVBQUVPLFVBQVU7SUFBRUYsSUFBSSxFQUFFLENBQUNFLFVBQVUsRUFBRUMsR0FBRyxJQUFJLENBQUNELFVBQVUsRUFBRUc7RUFBSSxDQUFDLENBQUM7O0VBRTdIO0VBQ0EsTUFBTUssTUFBTSxHQUFHRCxHQUFHLElBQUlBLEdBQUcsQ0FBQ0UsSUFBSSxJQUFJQyxLQUFLLENBQUNDLE9BQU8sQ0FBQ0osR0FBRyxDQUFDRSxJQUFJLENBQUNHLGdCQUFnQixDQUFDLEdBQ3RFO0lBQ0UsR0FBR0wsR0FBRztJQUNORSxJQUFJLEVBQUU7TUFDSixHQUFHRixHQUFHLENBQUNFLElBQUk7TUFDWEcsZ0JBQWdCLEVBQUUsQ0FBQyxHQUFHTCxHQUFHLENBQUNFLElBQUksQ0FBQ0csZ0JBQWdCLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLENBQUNDLENBQU0sRUFBRUMsQ0FBTSxLQUFLLENBQUNELENBQUMsRUFBRUUsUUFBUSxJQUFJLENBQUMsS0FBS0QsQ0FBQyxFQUFFQyxRQUFRLElBQUksQ0FBQyxDQUFDO0lBQ25IO0VBQ0YsQ0FBQyxHQUNEVCxHQUFHO0VBQ1AsT0FBT0MsTUFBTTtBQUNmIiwiaWdub3JlTGlzdCI6W119