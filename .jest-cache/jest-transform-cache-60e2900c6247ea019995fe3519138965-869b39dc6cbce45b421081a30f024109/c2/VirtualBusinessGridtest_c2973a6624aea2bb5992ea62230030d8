c11a1ff0c280846bdcc37783d96ec1e0
"use strict";

var _react = _interopRequireDefault(require("react"));
var _testUtils = require("../testUtils");
var _VirtualBusinessGrid = _interopRequireDefault(require("../../components/common/VirtualBusinessGrid"));
function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }
function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }
// Setup mocks before tests
beforeAll(() => {
  (0, _testUtils.setupTests)();
});
describe('VirtualBusinessGrid', () => {
  const mockBusinesses = Array.from({
    length: 100
  }, (_, i) => (0, _testUtils.createMockBusiness)({
    id: `business-${i}`,
    name: `Test Business ${i}`,
    distance: i * 100
  }));
  const defaultProps = {
    businesses: mockBusinesses,
    selectedBusiness: null,
    onBusinessSelect: jest.fn()
  };
  beforeEach(() => {
    jest.clearAllMocks();
  });
  it('renders business grid with correct number of visible items', async () => {
    (0, _testUtils.customRender)(/*#__PURE__*/_react.default.createElement(_VirtualBusinessGrid.default, defaultProps));
    await (0, _testUtils.waitFor)(() => {
      // Should render a subset of businesses (not all 100)
      const businessCards = _testUtils.screen.getAllByTestId(/^business-card-/);
      expect(businessCards.length).toBeGreaterThan(0);
      expect(businessCards.length).toBeLessThan(100);
    });
  });
  it('calls onBusinessSelect when business is clicked', async () => {
    (0, _testUtils.customRender)(/*#__PURE__*/_react.default.createElement(_VirtualBusinessGrid.default, defaultProps));
    await (0, _testUtils.waitFor)(() => {
      const firstBusinessCard = _testUtils.screen.getByTestId('business-card-business-0');
      firstBusinessCard.click();
    });
    expect(defaultProps.onBusinessSelect).toHaveBeenCalledWith(mockBusinesses[0]);
  });
  it('renders business information correctly', async () => {
    (0, _testUtils.customRender)(/*#__PURE__*/_react.default.createElement(_VirtualBusinessGrid.default, defaultProps));
    await (0, _testUtils.waitFor)(() => {
      expect(_testUtils.screen.getByText('Test Business 0')).toBeInTheDocument();
      expect(_testUtils.screen.getByText('123 Test St')).toBeInTheDocument();
    });
  });
  it('displays distance information', async () => {
    (0, _testUtils.customRender)(/*#__PURE__*/_react.default.createElement(_VirtualBusinessGrid.default, defaultProps));
    await (0, _testUtils.waitFor)(() => {
      expect(_testUtils.screen.getByText('0ft')).toBeInTheDocument();
    });
  });
  it('shows rating with stars', async () => {
    (0, _testUtils.customRender)(/*#__PURE__*/_react.default.createElement(_VirtualBusinessGrid.default, defaultProps));
    await (0, _testUtils.waitFor)(() => {
      const ratingElements = _testUtils.screen.getAllByText('4.5');
      expect(ratingElements.length).toBeGreaterThan(0);
    });
  });
  it('displays price level indicators', async () => {
    (0, _testUtils.customRender)(/*#__PURE__*/_react.default.createElement(_VirtualBusinessGrid.default, defaultProps));
    await (0, _testUtils.waitFor)(() => {
      // Price level is available in the business data but not visually displayed
      expect(_testUtils.screen.getByText('Test Business 0')).toBeInTheDocument();
    });
  });
  it('handles empty businesses array', () => {
    (0, _testUtils.customRender)(/*#__PURE__*/_react.default.createElement(_VirtualBusinessGrid.default, _extends({}, defaultProps, {
      businesses: []
    })));
    expect(_testUtils.screen.getByText('No businesses found in this area')).toBeInTheDocument();
  });
  it('calls onLoadMore when scrolling to bottom', async () => {
    (0, _testUtils.customRender)(/*#__PURE__*/_react.default.createElement(_VirtualBusinessGrid.default, defaultProps));

    // Simulate scroll to bottom
    const scrollContainer = _testUtils.screen.getByTestId('virtual-grid-container');
    _testUtils.fireEvent.scroll(scrollContainer, {
      target: {
        scrollTop: 1000
      }
    });

    // The component handles scrolling internally, no external onLoadMore callback
    await (0, _testUtils.waitFor)(() => {
      expect(scrollContainer).toBeInTheDocument();
    });
  });
  it('is accessible with proper ARIA labels', async () => {
    (0, _testUtils.customRender)(/*#__PURE__*/_react.default.createElement(_VirtualBusinessGrid.default, defaultProps));
    await (0, _testUtils.waitFor)(() => {
      const businessCards = _testUtils.screen.getAllByTestId(/^business-card-/);
      businessCards.forEach(card => {
        expect(card).toHaveAttribute('aria-label');
        expect(card).toHaveAttribute('role', 'button');
      });
    });
  });
  it('handles keyboard navigation', async () => {
    (0, _testUtils.customRender)(/*#__PURE__*/_react.default.createElement(_VirtualBusinessGrid.default, defaultProps));
    await (0, _testUtils.waitFor)(() => {
      const firstBusinessCard = _testUtils.screen.getByTestId('business-card-business-0');
      firstBusinessCard.focus();
      _testUtils.fireEvent.keyDown(firstBusinessCard, {
        key: 'Enter'
      });
    });
    expect(defaultProps.onBusinessSelect).toHaveBeenCalledWith(mockBusinesses[0]);
  });
  it('renders with responsive columns', () => {
    // Mock different screen sizes
    Object.defineProperty(window, 'innerWidth', {
      value: 768,
      writable: true
    });
    (0, _testUtils.customRender)(/*#__PURE__*/_react.default.createElement(_VirtualBusinessGrid.default, defaultProps));

    // The component calculates columns based on screen size
    // For mobile (width < 768), it should use 1 column
    const grid = _testUtils.screen.getByTestId('virtual-grid-container');
    expect(grid).toBeInTheDocument();
  });
  it('memoizes business cards for performance', () => {
    const {
      rerender
    } = (0, _testUtils.customRender)(/*#__PURE__*/_react.default.createElement(_VirtualBusinessGrid.default, defaultProps));

    // Re-render with same props
    rerender(/*#__PURE__*/_react.default.createElement(_VirtualBusinessGrid.default, defaultProps));

    // Business cards should be memoized and not re-render unnecessarily
    expect(_testUtils.screen.getByTestId('business-card-business-0')).toBeInTheDocument();
  });
  it('handles business selection with proper focus management', async () => {
    (0, _testUtils.customRender)(/*#__PURE__*/_react.default.createElement(_VirtualBusinessGrid.default, defaultProps));
    await (0, _testUtils.waitFor)(() => {
      const firstBusinessCard = _testUtils.screen.getByTestId('business-card-business-0');
      firstBusinessCard.click();
    });
    expect(defaultProps.onBusinessSelect).toHaveBeenCalledWith(mockBusinesses[0]);
    // Focus should be managed properly
    expect(document.activeElement).toBeInTheDocument();
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl90ZXN0VXRpbHMiLCJfVmlydHVhbEJ1c2luZXNzR3JpZCIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIl9leHRlbmRzIiwiT2JqZWN0IiwiYXNzaWduIiwiYmluZCIsIm4iLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ0IiwiciIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImFwcGx5IiwiYmVmb3JlQWxsIiwic2V0dXBUZXN0cyIsImRlc2NyaWJlIiwibW9ja0J1c2luZXNzZXMiLCJBcnJheSIsImZyb20iLCJfIiwiaSIsImNyZWF0ZU1vY2tCdXNpbmVzcyIsImlkIiwibmFtZSIsImRpc3RhbmNlIiwiZGVmYXVsdFByb3BzIiwiYnVzaW5lc3NlcyIsInNlbGVjdGVkQnVzaW5lc3MiLCJvbkJ1c2luZXNzU2VsZWN0IiwiamVzdCIsImZuIiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJpdCIsImN1c3RvbVJlbmRlciIsImNyZWF0ZUVsZW1lbnQiLCJ3YWl0Rm9yIiwiYnVzaW5lc3NDYXJkcyIsInNjcmVlbiIsImdldEFsbEJ5VGVzdElkIiwiZXhwZWN0IiwidG9CZUdyZWF0ZXJUaGFuIiwidG9CZUxlc3NUaGFuIiwiZmlyc3RCdXNpbmVzc0NhcmQiLCJnZXRCeVRlc3RJZCIsImNsaWNrIiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJnZXRCeVRleHQiLCJ0b0JlSW5UaGVEb2N1bWVudCIsInJhdGluZ0VsZW1lbnRzIiwiZ2V0QWxsQnlUZXh0Iiwic2Nyb2xsQ29udGFpbmVyIiwiZmlyZUV2ZW50Iiwic2Nyb2xsIiwidGFyZ2V0Iiwic2Nyb2xsVG9wIiwiZm9yRWFjaCIsImNhcmQiLCJ0b0hhdmVBdHRyaWJ1dGUiLCJmb2N1cyIsImtleURvd24iLCJrZXkiLCJkZWZpbmVQcm9wZXJ0eSIsIndpbmRvdyIsInZhbHVlIiwid3JpdGFibGUiLCJncmlkIiwicmVyZW5kZXIiLCJkb2N1bWVudCIsImFjdGl2ZUVsZW1lbnQiXSwic291cmNlcyI6WyJWaXJ0dWFsQnVzaW5lc3NHcmlkLnRlc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IGN1c3RvbVJlbmRlciwgc2NyZWVuLCB3YWl0Rm9yLCBmaXJlRXZlbnQsIGNyZWF0ZU1vY2tCdXNpbmVzcywgc2V0dXBUZXN0cyB9IGZyb20gJy4uL3Rlc3RVdGlscyc7XHJcbmltcG9ydCBWaXJ0dWFsQnVzaW5lc3NHcmlkIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvY29tbW9uL1ZpcnR1YWxCdXNpbmVzc0dyaWQnO1xyXG5cclxuLy8gU2V0dXAgbW9ja3MgYmVmb3JlIHRlc3RzXHJcbmJlZm9yZUFsbCgoKSA9PiB7XHJcbiAgc2V0dXBUZXN0cygpO1xyXG59KTtcclxuXHJcbmRlc2NyaWJlKCdWaXJ0dWFsQnVzaW5lc3NHcmlkJywgKCkgPT4ge1xyXG4gIGNvbnN0IG1vY2tCdXNpbmVzc2VzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogMTAwIH0sIChfLCBpKSA9PlxyXG4gICAgY3JlYXRlTW9ja0J1c2luZXNzKHtcclxuICAgICAgaWQ6IGBidXNpbmVzcy0ke2l9YCxcclxuICAgICAgbmFtZTogYFRlc3QgQnVzaW5lc3MgJHtpfWAsXHJcbiAgICAgIGRpc3RhbmNlOiBpICogMTAwLFxyXG4gICAgfSlcclxuICApO1xyXG5cclxuICBjb25zdCBkZWZhdWx0UHJvcHMgPSB7XHJcbiAgICBidXNpbmVzc2VzOiBtb2NrQnVzaW5lc3NlcyxcclxuICAgIHNlbGVjdGVkQnVzaW5lc3M6IG51bGwsXHJcbiAgICBvbkJ1c2luZXNzU2VsZWN0OiBqZXN0LmZuKCksXHJcbiAgfTtcclxuXHJcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ3JlbmRlcnMgYnVzaW5lc3MgZ3JpZCB3aXRoIGNvcnJlY3QgbnVtYmVyIG9mIHZpc2libGUgaXRlbXMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICBjdXN0b21SZW5kZXIoPFZpcnR1YWxCdXNpbmVzc0dyaWQgey4uLmRlZmF1bHRQcm9wc30gLz4pO1xyXG5cclxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xyXG4gICAgICAvLyBTaG91bGQgcmVuZGVyIGEgc3Vic2V0IG9mIGJ1c2luZXNzZXMgKG5vdCBhbGwgMTAwKVxyXG4gICAgICBjb25zdCBidXNpbmVzc0NhcmRzID0gc2NyZWVuLmdldEFsbEJ5VGVzdElkKC9eYnVzaW5lc3MtY2FyZC0vKTtcclxuICAgICAgZXhwZWN0KGJ1c2luZXNzQ2FyZHMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XHJcbiAgICAgIGV4cGVjdChidXNpbmVzc0NhcmRzLmxlbmd0aCkudG9CZUxlc3NUaGFuKDEwMCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ2NhbGxzIG9uQnVzaW5lc3NTZWxlY3Qgd2hlbiBidXNpbmVzcyBpcyBjbGlja2VkJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgY3VzdG9tUmVuZGVyKDxWaXJ0dWFsQnVzaW5lc3NHcmlkIHsuLi5kZWZhdWx0UHJvcHN9IC8+KTtcclxuXHJcbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcclxuICAgICAgY29uc3QgZmlyc3RCdXNpbmVzc0NhcmQgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2J1c2luZXNzLWNhcmQtYnVzaW5lc3MtMCcpO1xyXG4gICAgICBmaXJzdEJ1c2luZXNzQ2FyZC5jbGljaygpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZXhwZWN0KGRlZmF1bHRQcm9wcy5vbkJ1c2luZXNzU2VsZWN0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChtb2NrQnVzaW5lc3Nlc1swXSk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdyZW5kZXJzIGJ1c2luZXNzIGluZm9ybWF0aW9uIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcclxuICAgIGN1c3RvbVJlbmRlcig8VmlydHVhbEJ1c2luZXNzR3JpZCB7Li4uZGVmYXVsdFByb3BzfSAvPik7XHJcblxyXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XHJcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdUZXN0IEJ1c2luZXNzIDAnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcclxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJzEyMyBUZXN0IFN0JykpLnRvQmVJblRoZURvY3VtZW50KCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ2Rpc3BsYXlzIGRpc3RhbmNlIGluZm9ybWF0aW9uJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgY3VzdG9tUmVuZGVyKDxWaXJ0dWFsQnVzaW5lc3NHcmlkIHsuLi5kZWZhdWx0UHJvcHN9IC8+KTtcclxuXHJcbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcclxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJzBmdCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdzaG93cyByYXRpbmcgd2l0aCBzdGFycycsIGFzeW5jICgpID0+IHtcclxuICAgIGN1c3RvbVJlbmRlcig8VmlydHVhbEJ1c2luZXNzR3JpZCB7Li4uZGVmYXVsdFByb3BzfSAvPik7XHJcblxyXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJhdGluZ0VsZW1lbnRzID0gc2NyZWVuLmdldEFsbEJ5VGV4dCgnNC41Jyk7XHJcbiAgICAgIGV4cGVjdChyYXRpbmdFbGVtZW50cy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBpdCgnZGlzcGxheXMgcHJpY2UgbGV2ZWwgaW5kaWNhdG9ycycsIGFzeW5jICgpID0+IHtcclxuICAgIGN1c3RvbVJlbmRlcig8VmlydHVhbEJ1c2luZXNzR3JpZCB7Li4uZGVmYXVsdFByb3BzfSAvPik7XHJcblxyXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XHJcbiAgICAgIC8vIFByaWNlIGxldmVsIGlzIGF2YWlsYWJsZSBpbiB0aGUgYnVzaW5lc3MgZGF0YSBidXQgbm90IHZpc3VhbGx5IGRpc3BsYXllZFxyXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnVGVzdCBCdXNpbmVzcyAwJykpLnRvQmVJblRoZURvY3VtZW50KCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ2hhbmRsZXMgZW1wdHkgYnVzaW5lc3NlcyBhcnJheScsICgpID0+IHtcclxuICAgIGN1c3RvbVJlbmRlcig8VmlydHVhbEJ1c2luZXNzR3JpZCB7Li4uZGVmYXVsdFByb3BzfSBidXNpbmVzc2VzPXtbXX0gLz4pO1xyXG5cclxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdObyBidXNpbmVzc2VzIGZvdW5kIGluIHRoaXMgYXJlYScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xyXG4gIH0pO1xyXG5cclxuICBpdCgnY2FsbHMgb25Mb2FkTW9yZSB3aGVuIHNjcm9sbGluZyB0byBib3R0b20nLCBhc3luYyAoKSA9PiB7XHJcbiAgICBjdXN0b21SZW5kZXIoPFZpcnR1YWxCdXNpbmVzc0dyaWQgey4uLmRlZmF1bHRQcm9wc30gLz4pO1xyXG5cclxuICAgIC8vIFNpbXVsYXRlIHNjcm9sbCB0byBib3R0b21cclxuICAgIGNvbnN0IHNjcm9sbENvbnRhaW5lciA9IHNjcmVlbi5nZXRCeVRlc3RJZCgndmlydHVhbC1ncmlkLWNvbnRhaW5lcicpO1xyXG4gICAgZmlyZUV2ZW50LnNjcm9sbChzY3JvbGxDb250YWluZXIsIHsgdGFyZ2V0OiB7IHNjcm9sbFRvcDogMTAwMCB9IH0pO1xyXG5cclxuICAgIC8vIFRoZSBjb21wb25lbnQgaGFuZGxlcyBzY3JvbGxpbmcgaW50ZXJuYWxseSwgbm8gZXh0ZXJuYWwgb25Mb2FkTW9yZSBjYWxsYmFja1xyXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XHJcbiAgICAgIGV4cGVjdChzY3JvbGxDb250YWluZXIpLnRvQmVJblRoZURvY3VtZW50KCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ2lzIGFjY2Vzc2libGUgd2l0aCBwcm9wZXIgQVJJQSBsYWJlbHMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICBjdXN0b21SZW5kZXIoPFZpcnR1YWxCdXNpbmVzc0dyaWQgey4uLmRlZmF1bHRQcm9wc30gLz4pO1xyXG5cclxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xyXG4gICAgICBjb25zdCBidXNpbmVzc0NhcmRzID0gc2NyZWVuLmdldEFsbEJ5VGVzdElkKC9eYnVzaW5lc3MtY2FyZC0vKTtcclxuICAgICAgYnVzaW5lc3NDYXJkcy5mb3JFYWNoKGNhcmQgPT4ge1xyXG4gICAgICAgIGV4cGVjdChjYXJkKS50b0hhdmVBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnKTtcclxuICAgICAgICBleHBlY3QoY2FyZCkudG9IYXZlQXR0cmlidXRlKCdyb2xlJywgJ2J1dHRvbicpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBpdCgnaGFuZGxlcyBrZXlib2FyZCBuYXZpZ2F0aW9uJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgY3VzdG9tUmVuZGVyKDxWaXJ0dWFsQnVzaW5lc3NHcmlkIHsuLi5kZWZhdWx0UHJvcHN9IC8+KTtcclxuXHJcbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcclxuICAgICAgY29uc3QgZmlyc3RCdXNpbmVzc0NhcmQgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2J1c2luZXNzLWNhcmQtYnVzaW5lc3MtMCcpO1xyXG4gICAgICBmaXJzdEJ1c2luZXNzQ2FyZC5mb2N1cygpO1xyXG4gICAgICBmaXJlRXZlbnQua2V5RG93bihmaXJzdEJ1c2luZXNzQ2FyZCwgeyBrZXk6ICdFbnRlcicgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBleHBlY3QoZGVmYXVsdFByb3BzLm9uQnVzaW5lc3NTZWxlY3QpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKG1vY2tCdXNpbmVzc2VzWzBdKTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ3JlbmRlcnMgd2l0aCByZXNwb25zaXZlIGNvbHVtbnMnLCAoKSA9PiB7XHJcbiAgICAvLyBNb2NrIGRpZmZlcmVudCBzY3JlZW4gc2l6ZXNcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csICdpbm5lcldpZHRoJywgeyB2YWx1ZTogNzY4LCB3cml0YWJsZTogdHJ1ZSB9KTtcclxuXHJcbiAgICBjdXN0b21SZW5kZXIoPFZpcnR1YWxCdXNpbmVzc0dyaWQgey4uLmRlZmF1bHRQcm9wc30gLz4pO1xyXG5cclxuICAgIC8vIFRoZSBjb21wb25lbnQgY2FsY3VsYXRlcyBjb2x1bW5zIGJhc2VkIG9uIHNjcmVlbiBzaXplXHJcbiAgICAvLyBGb3IgbW9iaWxlICh3aWR0aCA8IDc2OCksIGl0IHNob3VsZCB1c2UgMSBjb2x1bW5cclxuICAgIGNvbnN0IGdyaWQgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ3ZpcnR1YWwtZ3JpZC1jb250YWluZXInKTtcclxuICAgIGV4cGVjdChncmlkKS50b0JlSW5UaGVEb2N1bWVudCgpO1xyXG4gIH0pO1xyXG5cclxuICBpdCgnbWVtb2l6ZXMgYnVzaW5lc3MgY2FyZHMgZm9yIHBlcmZvcm1hbmNlJywgKCkgPT4ge1xyXG4gICAgY29uc3QgeyByZXJlbmRlciB9ID0gY3VzdG9tUmVuZGVyKDxWaXJ0dWFsQnVzaW5lc3NHcmlkIHsuLi5kZWZhdWx0UHJvcHN9IC8+KTtcclxuXHJcbiAgICAvLyBSZS1yZW5kZXIgd2l0aCBzYW1lIHByb3BzXHJcbiAgICByZXJlbmRlcig8VmlydHVhbEJ1c2luZXNzR3JpZCB7Li4uZGVmYXVsdFByb3BzfSAvPik7XHJcblxyXG4gICAgLy8gQnVzaW5lc3MgY2FyZHMgc2hvdWxkIGJlIG1lbW9pemVkIGFuZCBub3QgcmUtcmVuZGVyIHVubmVjZXNzYXJpbHlcclxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2J1c2luZXNzLWNhcmQtYnVzaW5lc3MtMCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xyXG4gIH0pO1xyXG5cclxuICBpdCgnaGFuZGxlcyBidXNpbmVzcyBzZWxlY3Rpb24gd2l0aCBwcm9wZXIgZm9jdXMgbWFuYWdlbWVudCcsIGFzeW5jICgpID0+IHtcclxuICAgIGN1c3RvbVJlbmRlcig8VmlydHVhbEJ1c2luZXNzR3JpZCB7Li4uZGVmYXVsdFByb3BzfSAvPik7XHJcblxyXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGZpcnN0QnVzaW5lc3NDYXJkID0gc2NyZWVuLmdldEJ5VGVzdElkKCdidXNpbmVzcy1jYXJkLWJ1c2luZXNzLTAnKTtcclxuICAgICAgZmlyc3RCdXNpbmVzc0NhcmQuY2xpY2soKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGV4cGVjdChkZWZhdWx0UHJvcHMub25CdXNpbmVzc1NlbGVjdCkudG9IYXZlQmVlbkNhbGxlZFdpdGgobW9ja0J1c2luZXNzZXNbMF0pO1xyXG4gICAgLy8gRm9jdXMgc2hvdWxkIGJlIG1hbmFnZWQgcHJvcGVybHlcclxuICAgIGV4cGVjdChkb2N1bWVudC5hY3RpdmVFbGVtZW50KS50b0JlSW5UaGVEb2N1bWVudCgpO1xyXG4gIH0pO1xyXG59KTtcclxuIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQUFBLE1BQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLFVBQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLG9CQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFBOEUsU0FBQUQsdUJBQUFJLENBQUEsV0FBQUEsQ0FBQSxJQUFBQSxDQUFBLENBQUFDLFVBQUEsR0FBQUQsQ0FBQSxLQUFBRSxPQUFBLEVBQUFGLENBQUE7QUFBQSxTQUFBRyxTQUFBLFdBQUFBLFFBQUEsR0FBQUMsTUFBQSxDQUFBQyxNQUFBLEdBQUFELE1BQUEsQ0FBQUMsTUFBQSxDQUFBQyxJQUFBLGVBQUFDLENBQUEsYUFBQVAsQ0FBQSxNQUFBQSxDQUFBLEdBQUFRLFNBQUEs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