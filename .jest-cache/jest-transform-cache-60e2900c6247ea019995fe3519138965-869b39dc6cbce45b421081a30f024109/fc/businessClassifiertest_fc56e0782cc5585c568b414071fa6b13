4d09cadd30e48a4941b46b1c520e93cd
"use strict";

var _businessClassifier = require("@/lib/classification/businessClassifier");
describe('classifyBusiness', () => {
  it('identifies well-known coffee brand with high confidence', () => {
    const res = (0, _businessClassifier.classifyBusiness)({
      name: 'Starbucks Coffee'
    });
    expect(res.taxonomy).toBe('coffee');
    expect(res.brandId).toBe('starbucks');
    expect(res.confidence).toBeGreaterThanOrEqual(0.95);
  });
  it('maps google restaurant types to dining with strong confidence', () => {
    const res = (0, _businessClassifier.classifyBusiness)({
      name: 'Local Kitchen',
      googleTypes: ['restaurant']
    });
    expect(res.taxonomy).toBe('dining');
    expect(res.confidence).toBeGreaterThanOrEqual(0.8);
  });
  it('maps department_store to shopping', () => {
    const res = (0, _businessClassifier.classifyBusiness)({
      name: 'Generic Department',
      googleTypes: ['department_store']
    });
    expect(res.taxonomy).toBe('shopping');
    expect(res.confidence).toBeGreaterThanOrEqual(0.5);
  });
  it('infers home improvement from mapbox place name keywords', () => {
    const res = (0, _businessClassifier.classifyBusiness)({
      name: "Joe's",
      mapboxPlaceName: 'Joe\'s Hardware Home Improvement, Springfield'
    });
    expect(res.taxonomy).toBe('home_improvement');
    expect(res.confidence).toBeGreaterThanOrEqual(0.5);
  });
  it('defaults to shopping with low confidence when ambiguous', () => {
    const res = (0, _businessClassifier.classifyBusiness)({
      name: 'The Store'
    });
    expect(res.taxonomy).toBe('shopping');
    expect(res.confidence).toBeLessThanOrEqual(0.4);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfYnVzaW5lc3NDbGFzc2lmaWVyIiwicmVxdWlyZSIsImRlc2NyaWJlIiwiaXQiLCJyZXMiLCJjbGFzc2lmeUJ1c2luZXNzIiwibmFtZSIsImV4cGVjdCIsInRheG9ub215IiwidG9CZSIsImJyYW5kSWQiLCJjb25maWRlbmNlIiwidG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCIsImdvb2dsZVR5cGVzIiwibWFwYm94UGxhY2VOYW1lIiwidG9CZUxlc3NUaGFuT3JFcXVhbCJdLCJzb3VyY2VzIjpbImJ1c2luZXNzQ2xhc3NpZmllci50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNsYXNzaWZ5QnVzaW5lc3MgfSBmcm9tICdAL2xpYi9jbGFzc2lmaWNhdGlvbi9idXNpbmVzc0NsYXNzaWZpZXInO1xyXG5cclxuZGVzY3JpYmUoJ2NsYXNzaWZ5QnVzaW5lc3MnLCAoKSA9PiB7XHJcbiAgaXQoJ2lkZW50aWZpZXMgd2VsbC1rbm93biBjb2ZmZWUgYnJhbmQgd2l0aCBoaWdoIGNvbmZpZGVuY2UnLCAoKSA9PiB7XHJcbiAgICBjb25zdCByZXMgPSBjbGFzc2lmeUJ1c2luZXNzKHsgbmFtZTogJ1N0YXJidWNrcyBDb2ZmZWUnIH0pO1xyXG4gICAgZXhwZWN0KHJlcy50YXhvbm9teSkudG9CZSgnY29mZmVlJyk7XHJcbiAgICBleHBlY3QocmVzLmJyYW5kSWQpLnRvQmUoJ3N0YXJidWNrcycpO1xyXG4gICAgZXhwZWN0KHJlcy5jb25maWRlbmNlKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDAuOTUpO1xyXG4gIH0pO1xyXG5cclxuICBpdCgnbWFwcyBnb29nbGUgcmVzdGF1cmFudCB0eXBlcyB0byBkaW5pbmcgd2l0aCBzdHJvbmcgY29uZmlkZW5jZScsICgpID0+IHtcclxuICAgIGNvbnN0IHJlcyA9IGNsYXNzaWZ5QnVzaW5lc3MoeyBuYW1lOiAnTG9jYWwgS2l0Y2hlbicsIGdvb2dsZVR5cGVzOiBbJ3Jlc3RhdXJhbnQnXSB9KTtcclxuICAgIGV4cGVjdChyZXMudGF4b25vbXkpLnRvQmUoJ2RpbmluZycpO1xyXG4gICAgZXhwZWN0KHJlcy5jb25maWRlbmNlKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDAuOCk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdtYXBzIGRlcGFydG1lbnRfc3RvcmUgdG8gc2hvcHBpbmcnLCAoKSA9PiB7XHJcbiAgICBjb25zdCByZXMgPSBjbGFzc2lmeUJ1c2luZXNzKHsgbmFtZTogJ0dlbmVyaWMgRGVwYXJ0bWVudCcsIGdvb2dsZVR5cGVzOiBbJ2RlcGFydG1lbnRfc3RvcmUnXSB9KTtcclxuICAgIGV4cGVjdChyZXMudGF4b25vbXkpLnRvQmUoJ3Nob3BwaW5nJyk7XHJcbiAgICBleHBlY3QocmVzLmNvbmZpZGVuY2UpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMC41KTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ2luZmVycyBob21lIGltcHJvdmVtZW50IGZyb20gbWFwYm94IHBsYWNlIG5hbWUga2V5d29yZHMnLCAoKSA9PiB7XHJcbiAgICBjb25zdCByZXMgPSBjbGFzc2lmeUJ1c2luZXNzKHsgbmFtZTogXCJKb2Unc1wiLCBtYXBib3hQbGFjZU5hbWU6ICdKb2VcXCdzIEhhcmR3YXJlIEhvbWUgSW1wcm92ZW1lbnQsIFNwcmluZ2ZpZWxkJyB9KTtcclxuICAgIGV4cGVjdChyZXMudGF4b25vbXkpLnRvQmUoJ2hvbWVfaW1wcm92ZW1lbnQnKTtcclxuICAgIGV4cGVjdChyZXMuY29uZmlkZW5jZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwLjUpO1xyXG4gIH0pO1xyXG5cclxuICBpdCgnZGVmYXVsdHMgdG8gc2hvcHBpbmcgd2l0aCBsb3cgY29uZmlkZW5jZSB3aGVuIGFtYmlndW91cycsICgpID0+IHtcclxuICAgIGNvbnN0IHJlcyA9IGNsYXNzaWZ5QnVzaW5lc3MoeyBuYW1lOiAnVGhlIFN0b3JlJyB9KTtcclxuICAgIGV4cGVjdChyZXMudGF4b25vbXkpLnRvQmUoJ3Nob3BwaW5nJyk7XHJcbiAgICBleHBlY3QocmVzLmNvbmZpZGVuY2UpLnRvQmVMZXNzVGhhbk9yRXF1YWwoMC40KTtcclxuICB9KTtcclxufSk7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFBQSxtQkFBQSxHQUFBQyxPQUFBO0FBRUFDLFFBQVEsQ0FBQyxrQkFBa0IsRUFBRSxNQUFNO0VBQ2pDQyxFQUFFLENBQUMseURBQXlELEVBQUUsTUFBTTtJQUNsRSxNQUFNQyxHQUFHLEdBQUcsSUFBQUMsb0NBQWdCLEVBQUM7TUFBRUMsSUFBSSxFQUFFO0lBQW1CLENBQUMsQ0FBQztJQUMxREMsTUFBTSxDQUFDSCxHQUFHLENBQUNJLFFBQVEsQ0FBQyxDQUFDQyxJQUFJLENBQUMsUUFBUSxDQUFDO0lBQ25DRixNQUFNLENBQUNILEdBQUcsQ0FBQ00sT0FBTyxDQUFDLENBQUNELElBQUksQ0FBQyxXQUFXLENBQUM7SUFDckNGLE1BQU0sQ0FBQ0gsR0FBRyxDQUFDTyxVQUFVLENBQUMsQ0FBQ0Msc0JBQXNCLENBQUMsSUFBSSxDQUFDO0VBQ3JELENBQUMsQ0FBQztFQUVGVCxFQUFFLENBQUMsK0RBQStELEVBQUUsTUFBTTtJQUN4RSxNQUFNQyxHQUFHLEdBQUcsSUFBQUMsb0NBQWdCLEVBQUM7TUFBRUMsSUFBSSxFQUFFLGVBQWU7TUFBRU8sV0FBVyxFQUFFLENBQUMsWUFBWTtJQUFFLENBQUMsQ0FBQztJQUNwRk4sTUFBTSxDQUFDSCxHQUFHLENBQUNJLFFBQVEsQ0FBQyxDQUFDQyxJQUFJLENBQUMsUUFBUSxDQUFDO0lBQ25DRixNQUFNLENBQUNILEdBQUcsQ0FBQ08sVUFBVSxDQUFDLENBQUNDLHNCQUFzQixDQUFDLEdBQUcsQ0FBQztFQUNwRCxDQUFDLENBQUM7RUFFRlQsRUFBRSxDQUFDLG1DQUFtQyxFQUFFLE1BQU07SUFDNUMsTUFBTUMsR0FBRyxHQUFHLElBQUFDLG9DQUFnQixFQUFDO01BQUVDLElBQUksRUFBRSxvQkFBb0I7TUFBRU8sV0FBVyxFQUFFLENBQUMsa0JBQWtCO0lBQUUsQ0FBQyxDQUFDO0lBQy9GTixNQUFNLENBQUNILEdBQUcsQ0FBQ0ksUUFBUSxDQUFDLENBQUNDLElBQUksQ0FBQyxVQUFVLENBQUM7SUFDckNGLE1BQU0sQ0FBQ0gsR0FBRyxDQUFDTyxVQUFVLENBQUMsQ0FBQ0Msc0JBQXNCLENBQUMsR0FBRyxDQUFDO0VBQ3BELENBQUMsQ0FBQztFQUVGVCxFQUFFLENBQUMseURBQXlELEVBQUUsTUFBTTtJQUNsRSxNQUFNQyxHQUFHLEdBQUcsSUFBQUMsb0NBQWdCLEVBQUM7TUFBRUMsSUFBSSxFQUFFLE9BQU87TUFBRVEsZUFBZSxFQUFFO0lBQWdELENBQUMsQ0FBQztJQUNqSFAsTUFBTSxDQUFDSCxHQUFHLENBQUNJLFFBQVEsQ0FBQyxDQUFDQyxJQUFJLENBQUMsa0JBQWtCLENBQUM7SUFDN0NGLE1BQU0sQ0FBQ0gsR0FBRyxDQUFDTyxVQUFVLENBQUMsQ0FBQ0Msc0JBQXNCLENBQUMsR0FBRyxDQUFDO0VBQ3BELENBQUMsQ0FBQztFQUVGVCxFQUFFLENBQUMseURBQXlELEVBQUUsTUFBTTtJQUNsRSxNQUFNQyxHQUFHLEdBQUcsSUFBQUMsb0NBQWdCLEVBQUM7TUFBRUMsSUFBSSxFQUFFO0lBQVksQ0FBQyxDQUFDO0lBQ25EQyxNQUFNLENBQUNILEdBQUcsQ0FBQ0ksUUFBUSxDQUFDLENBQUNDLElBQUksQ0FBQyxVQUFVLENBQUM7SUFDckNGLE1BQU0sQ0FBQ0gsR0FBRyxDQUFDTyxVQUFVLENBQUMsQ0FBQ0ksbUJBQW1CLENBQUMsR0FBRyxDQUFDO0VBQ2pELENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==